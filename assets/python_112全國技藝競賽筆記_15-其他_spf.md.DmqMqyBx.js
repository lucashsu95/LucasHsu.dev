import{_ as t,c as h,J as s,V as l,E as i,o as p}from"./chunks/framework.C9sE8QFS.js";const C=JSON.parse('{"title":"SPF（Smallest Prime Factor）","description":"深入解析SPF（Smallest Prime Factor）最小質因數演算法！從概念到Python實作，完整學習篩法預處理、質因數分解、質數判別等技巧。涵蓋O(log n)快速分解、非質因數計算、GCD/LCM應用，適合全國技藝競賽與數論問題解題。附完整Python程式碼範例。","frontmatter":{"outline":"deep","head":[["meta",{"name":"author","content":"許恩綸"}],["meta",{"name":"keywords","content":"SPF最小質因數, Smallest Prime Factor, Python質因數分解, 篩法演算法, 數論演算法Python, 質數判別, Python競賽程式, 全國技藝競賽, GCD最大公因數, LCM最小公倍數, Python SPF篩法, 質因數分解優化, 非質因數計算, 數論競賽技巧"}],["meta",{"name":"description","content":"深入解析SPF（Smallest Prime Factor）最小質因數演算法！從概念到Python實作，完整學習篩法預處理、質因數分解、質數判別等技巧。涵蓋O(log n)快速分解、非質因數計算、GCD/LCM應用，適合全國技藝競賽與數論問題解題。附完整Python程式碼範例。"}],["meta",{"property":"og:title","content":"SPF最小質因數完全解析 | Python質因數分解演算法實戰教學"}],["meta",{"property":"og:description","content":"完整學習SPF篩法演算法！從最小質因數概念到Python實作，掌握O(log n)快速質因數分解技巧。涵蓋質數判別、非質因數計算、GCD/LCM應用，適合程式競賽與數論問題。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://lucashsu95.github.io/LucasHsu.dev/images/python-cover.jpg"}],["meta",{"property":"og:url","content":"https://lucashsu95.github.io/LucasHsu.dev/python/112全國技藝競賽筆記/15-其他/spf.html"}],["meta",{"property":"og:site_name","content":"LucasHsu.dev - 程式開發教學"}],["meta",{"property":"article:author","content":"許恩綸"}],["meta",{"property":"article:published_time","content":"2025-11-15T16:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-15T16:00:00.000Z"}],["meta",{"property":"article:section","content":"Python演算法與數論"}],["meta",{"property":"article:tag","content":"SPF最小質因數"}],["meta",{"property":"article:tag","content":"Python演算法"}],["meta",{"property":"article:tag","content":"質因數分解"}],["meta",{"property":"article:tag","content":"數論競賽"}],["meta",{"property":"article:tag","content":"篩法演算法"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:site","content":"@lucashsu95"}],["meta",{"name":"twitter:creator","content":"@lucashsu95"}],["meta",{"name":"twitter:title","content":"SPF最小質因數完全解析 | Python質因數分解演算法實戰教學"}],["meta",{"name":"twitter:description","content":"完整學習SPF篩法演算法與Python實作！掌握O(log n)快速質因數分解，涵蓋質數判別、非質因數計算等競賽技巧，附完整程式碼範例。"}],["link",{"rel":"canonical","href":"https://lucashsu95.github.io/LucasHsu.dev/python/112全國技藝競賽筆記/15-其他/spf.html"}],["meta",{"name":"robots","content":"index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"}],["script",{"type":"application/ld+json","content":"{\\n  \\"@context\\": \\"https://schema.org\\",\\n  \\"@type\\": \\"TechnicalArticle\\",\\n  \\"headline\\": \\"SPF最小質因數完全解析 | Python質因數分解演算法實戰教學\\",\\n  \\"description\\": \\"深入解析SPF（Smallest Prime Factor）最小質因數演算法！從概念到Python實作，完整學習篩法預處理、質因數分解、質數判別等技巧，適合全國技藝競賽與數論問題解題。\\",\\n  \\"author\\": {\\n    \\"@type\\": \\"Person\\", \\n    \\"name\\": \\"許恩綸\\",\\n    \\"url\\": \\"https://lucashsu95.github.io/LucasHsu.dev/\\"\\n  },\\n  \\"publisher\\": {\\n    \\"@type\\": \\"Organization\\",\\n    \\"name\\": \\"LucasHsu.dev\\",\\n    \\"url\\": \\"https://lucashsu95.github.io/LucasHsu.dev/\\"\\n  },\\n  \\"datePublished\\": \\"2025-11-16T00:00:00+08:00\\",\\n  \\"dateModified\\": \\"2025-11-16T00:00:00+08:00\\",\\n  \\"mainEntityOfPage\\": {\\n    \\"@type\\": \\"WebPage\\",\\n    \\"@id\\": \\"https://lucashsu95.github.io/LucasHsu.dev/python/112全國技藝競賽筆記/15-其他/spf.html\\"\\n  },\\n  \\"image\\": \\"https://lucashsu95.github.io/LucasHsu.dev/images/python-cover.jpg\\",\\n  \\"articleSection\\": \\"Python演算法與數論\\",\\n  \\"keywords\\": [\\"SPF最小質因數\\", \\"Smallest Prime Factor\\", \\"質因數分解\\", \\"Python篩法\\", \\"數論演算法\\", \\"質數判別\\", \\"全國技藝競賽\\", \\"Python競賽程式\\"],\\n  \\"about\\": [\\n    {\\n      \\"@type\\": \\"Thing\\",\\n      \\"name\\": \\"SPF最小質因數\\",\\n      \\"description\\": \\"Smallest Prime Factor演算法原理與應用\\"\\n    },\\n    {\\n      \\"@type\\": \\"Thing\\", \\n      \\"name\\": \\"質因數分解\\",\\n      \\"description\\": \\"利用SPF陣列進行O(log n)快速分解\\"\\n    },\\n    {\\n      \\"@type\\": \\"Thing\\",\\n      \\"name\\": \\"篩法演算法\\",\\n      \\"description\\": \\"預處理最小質因數的高效篩法技巧\\"\\n    }\\n  ],\\n  \\"teaches\\": [\\n    \\"SPF最小質因數概念\\",\\n    \\"篩法演算法實作\\",\\n    \\"質因數分解技巧\\",\\n    \\"質數判別方法\\",\\n    \\"非質因數計算\\",\\n    \\"GCD與LCM應用\\"\\n  ],\\n  \\"audience\\": {\\n    \\"@type\\": \\"Audience\\",\\n    \\"audienceType\\": \\"Python程式設計與競賽學習者\\"\\n  },\\n  \\"educationalLevel\\": \\"中級\\",\\n  \\"learningResourceType\\": \\"演算法教學與競賽筆記\\",\\n  \\"programmingLanguage\\": \\"Python\\",\\n  \\"typicalAgeRange\\": \\"18-45\\"\\n}\\n"}]]},"headers":[],"relativePath":"python/112全國技藝競賽筆記/15-其他/spf.md","filePath":"python/112全國技藝競賽筆記/15-其他/spf.md","lastUpdated":1763301835000}'),k={name:"python/112全國技藝競賽筆記/15-其他/spf.md"},e=l(`<h1 id="spf-smallest-prime-factor" tabindex="-1">SPF（Smallest Prime Factor） <a class="header-anchor" href="#spf-smallest-prime-factor" aria-label="Permalink to &quot;SPF（Smallest Prime Factor）&quot;">​</a></h1><h2 id="spf-是什麼" tabindex="-1">SPF 是什麼？ <a class="header-anchor" href="#spf-是什麼" aria-label="Permalink to &quot;SPF 是什麼？&quot;">​</a></h2><p>SPF 指的是「最小質因數」，即一個整數除了1之外的最小質因數。例如，12 的 SPF 是 2，15 的 SPF 是 3，質數的 SPF 是其本身。</p><hr><h2 id="為什麼要得到每個數的最小質因數" tabindex="-1">為什麼要得到每個數的最小質因數？ <a class="header-anchor" href="#為什麼要得到每個數的最小質因數" aria-label="Permalink to &quot;為什麼要得到每個數的最小質因數？&quot;">​</a></h2><ul><li><strong>快速質因數分解</strong>：利用 SPF 陣列，可以在 O(log n) 時間內快速分解數字，避免暴力除法。</li><li><strong>判別質數</strong>：如果一個數的 SPF 等於它自己，代表它是質數。</li><li><strong>求最大公因數（GCD）和最小公倍數（LCM）</strong>：透過質因數分解結果可以更方便計算。</li><li><strong>提高數論相關演算法效率</strong>：在競賽與複雜數論問題中非常重要。</li></ul><hr><h2 id="spf-質因數分解實例" tabindex="-1">SPF 質因數分解實例 <a class="header-anchor" href="#spf-質因數分解實例" aria-label="Permalink to &quot;SPF 質因數分解實例&quot;">​</a></h2><p>假設我們要分解數字 <strong>84</strong>，使用 SPF 陣列的步驟如下：</p><ol><li>利用 SPF 陣列，我們先知道 84 的最小質因數是 <strong>2</strong>。</li><li>我們用 2 去除 84，得到 <strong>42</strong>。</li><li>對 42，再用 SPF 陣列知道其最小質因數還是 <strong>2</strong>。</li><li>42 除以 2 得到 <strong>21</strong>。</li><li>21 的最小質因數是 <strong>3</strong>，用 3 去除得到 <strong>7</strong>。</li><li>7 的最小質因數是它自己 <strong>7</strong>，說明 7 是質數，分解完成。</li></ol><p>質因數分解結果是 $$84 = 2 \\times 2 \\times 3 \\times 7$$。</p><h3 id="優勢分析" tabindex="-1">優勢分析 <a class="header-anchor" href="#優勢分析" aria-label="Permalink to &quot;優勢分析&quot;">​</a></h3><p>這個過程中，透過 SPF 陣列，我們不需從頭檢查除數，能直接找出最小質因數，快速完成分解。</p><p><strong>應用延伸：</strong></p><ul><li><strong>求 GCD/LCM</strong>：把質因數拿來求最大公因數（GCD）或最小公倍數（LCM）時也很方便，因為質因數與次數都已知。</li><li><strong>質數判別</strong>：若檢查一個數的 SPF 等於它本身，代表它是質數，可快速判斷質數。</li></ul><p><strong>總結</strong>：SPF 陣列透過記錄每個數的最小質因數，使質因數分解與質數判斷大幅加速，適合解決數論、競賽等相關問題。</p><hr><h2 id="遇到的問題與解決方案" tabindex="-1">遇到的問題與解決方案 <a class="header-anchor" href="#遇到的問題與解決方案" aria-label="Permalink to &quot;遇到的問題與解決方案&quot;">​</a></h2><table><thead><tr><th>問題</th><th>解決方案</th></tr></thead><tbody><tr><td>如何在大量數字中快速分解質因數</td><td>使用 SPF 篩法預先計算，避免重複計算；節省時間。</td></tr><tr><td>如何記錄每個數的最小質因數</td><td>建立 SPF 陣列，每個位置存最小質因數。</td></tr><tr><td>如何用 SPF 進行質因數分解</td><td>迴圈利用 SPF 持續除以最小質因數直到剩 1。</td></tr><tr><td>判断非質因數問題怎麼解決</td><td>用 SPF 判斷質因數後，從所有因數中挑出非質因數。</td></tr></tbody></table><hr><h2 id="spf-範例程式碼-python" tabindex="-1">SPF 範例程式碼（Python） <a class="header-anchor" href="#spf-範例程式碼-python" aria-label="Permalink to &quot;SPF 範例程式碼（Python）&quot;">​</a></h2><h3 id="_1-建立-spf-陣列-篩法" tabindex="-1">1. 建立 SPF 陣列（篩法） <a class="header-anchor" href="#_1-建立-spf-陣列-篩法" aria-label="Permalink to &quot;1. 建立 SPF 陣列（篩法）&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sieve_spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_n</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    使用篩法建立 SPF（最小質因數）陣列</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    參數:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        max_n: 要處理的最大數字</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    返回:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        spf: SPF 陣列，spf[i] 表示 i 的最小質因數</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    時間複雜度: O(n log log n)</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    spf </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_n </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 1 的 SPF 定義為 1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 初始化：每個數的 SPF 先設為自己</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> range</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> max_n </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 篩法：從 2 開始標記倍數</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> range</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_n</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">**</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # i 是質數</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">            # 標記所有 i 的倍數，從 i*i 開始（更小的倍數已被處理過）</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">            for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> j </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> range</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> max_n </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">+</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">                if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">j</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ==</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> j</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 如果 j 還沒被標記過</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">                    spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">j</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i   </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 將 i 設為 j 的最小質因數</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span></span></code></pre></div><p><strong>程式碼解析：</strong></p><ul><li>第 10-11 行：初始化每個數的 SPF 為自己，質數的 SPF 就是它本身</li><li>第 14 行：只需檢查到 √n，因為更大的因數必定已被處理</li><li>第 15 行：<code>if spf[i] == i</code> 確認 i 是質數（未被更小的數標記過）</li><li>第 17 行：從 i² 開始標記，因為更小的倍數（如 2i, 3i...）已被更小的質數處理過</li><li>第 18-19 行：只在第一次遇到時標記，確保記錄的是<strong>最小</strong>質因數</li></ul><h3 id="_2-取得所有因數" tabindex="-1">2. 取得所有因數 <a class="header-anchor" href="#_2-取得所有因數" aria-label="Permalink to &quot;2. 取得所有因數&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> get_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">x</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    取得數字 x 的所有因數</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    參數:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        x: 要求因數的數字</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    返回:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        factors: 包含所有因數的集合</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    時間複雜度: O(√x)</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    factors </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> set</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 只需檢查到 √x</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> range</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">x</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">**</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">0.5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> x </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">%</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">==</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # i 是因數</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">x </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">//</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> i</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # x/i 也是因數</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> factors</span></span></code></pre></div><p><strong>程式碼解析：</strong></p><ul><li>使用 <code>set</code> 避免重複（例如 x=16 時，4 只會出現一次）</li><li>第 15-18 行：如果 i 是因數，那麼 x/i 也必定是因數，一次找到兩個因數</li><li>只需檢查到 √x，大幅提升效率</li></ul><h3 id="_3-取得非質因數" tabindex="-1">3. 取得非質因數 <a class="header-anchor" href="#_3-取得非質因數" aria-label="Permalink to &quot;3. 取得非質因數&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">def</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> get_non_prime_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">x</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">):</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    取得數字 x 的所有非質因數（合數因數）</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    參數:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        x: 要求非質因數的數字</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        spf: SPF 陣列</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    </span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    返回:</span></span>
<span class="line"><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        non_prime_factors: 排序後的非質因數列表</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    factors </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> get_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">x</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    non_prime_factors </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> []</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> f </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # 排除 1，並判斷是否為合數</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        # spf[f] != f 表示 f 不是質數（有更小的質因數）</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> f </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">!=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> and</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">f</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> f</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">            non_prime_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">append</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">f</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> sorted</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">non_prime_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre></div><p><strong>程式碼解析：</strong></p><ul><li>第 18 行：<code>spf[f] != f</code> 是判斷合數的關鍵 <ul><li>如果 <code>spf[f] == f</code>，表示 f 是質數（最小質因數是自己）</li><li>如果 <code>spf[f] != f</code>，表示 f 有更小的質因數，是合數</li></ul></li><li>第 17 行：排除 1，因為 1 既不是質數也不是合數</li></ul><h3 id="_4-完整範例" tabindex="-1">4. 完整範例 <a class="header-anchor" href="#_4-完整範例" aria-label="Permalink to &quot;4. 完整範例&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 範例：處理多筆查詢</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_n </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> *</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> **</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">spf </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sieve_spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">max_n</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 預先建立 SPF 陣列（只需一次）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 讀取查詢次數</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> _ </span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">in</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> range</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">input</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())):</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    num </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> int</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">input</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    non_prime_factors </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> get_non_prime_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">num</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> spf</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 輸出非質因數數量 + 1（包含數字本身）</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    print</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">len</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">non_prime_factors</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre></div><p><strong>使用範例：</strong></p><p>輸入：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>3</span></span>
<span class="line"><span>12</span></span>
<span class="line"><span>15</span></span>
<span class="line"><span>20</span></span></code></pre></div><p>處理過程：</p><ul><li><p><strong>12 的因數</strong>：1, 2, 3, 4, 6, 12</p><ul><li>非質因數：4, 6, 12（2, 3 是質數）</li><li>輸出：<code>4</code>（3個非質因數 + 1）</li></ul></li><li><p><strong>15 的因數</strong>：1, 3, 5, 15</p><ul><li>非質因數：15（3, 5 是質數）</li><li>輸出：<code>2</code>（1個非質因數 + 1）</li></ul></li><li><p><strong>20 的因數</strong>：1, 2, 4, 5, 10, 20</p><ul><li>非質因數：4, 10, 20（2, 5 是質數）</li><li>輸出：<code>4</code>（3個非質因數 + 1）</li></ul></li></ul>`,40);function r(d,g,o,y,A,c){const a=i("NolebaseGitContributors"),n=i("NolebaseGitChangelog");return p(),h("div",null,[e,s(a),s(n)])}const B=t(k,[["render",r]]);export{C as __pageData,B as default};
