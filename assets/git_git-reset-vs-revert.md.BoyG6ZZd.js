import{_ as A,c,b as k,w as s,au as r,m as e,J as i,a,V as t,E as n,o as l}from"./chunks/framework.C9sE8QFS.js";const R=JSON.parse('{"title":"Git Revert vs Reset","description":"","frontmatter":{"outline":"deep","head":[["meta",{"name":"author","content":"許恩綸"}],["meta",{"name":"keywords","content":"git revert,git reset,撤銷提交,回退版本,安全回退"}],["meta",{"property":"og:title","content":"Git Revert vs Reset 安全回退指南"}],["meta",{"property":"og:description","content":"詳解 git revert 與 reset 差異,包含使用情境、安全性比較、批量回退與常見問題排解"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"./imgs/git-cover.png"}]]},"headers":[],"relativePath":"git/git-reset-vs-revert.md","filePath":"git/git-reset-vs-revert.md","lastUpdated":1766683168000}'),g={name:"git/git-reset-vs-revert.md"},D=t('<h1 id="git-revert-vs-reset" tabindex="-1">Git Revert vs Reset <a class="header-anchor" href="#git-revert-vs-reset" aria-label="Permalink to &quot;Git Revert vs Reset&quot;">​</a></h1><blockquote><p>TL;DR：<code>git revert</code> 生成反向提交，保留歷史，適合已推送的提交（溫柔模式）；<code>git reset</code> 重寫歷史，適合本地未推送的提交（狠心模式）。批量回退用 <code>revert &lt;old&gt;..&lt;new&gt;</code>。回退後記得 <code>push</code>。要反悔時，先找溫柔的 revert，真的沒辦法再考慮狠心的 reset！</p></blockquote><h2 id="前置知識" tabindex="-1">前置知識 <a class="header-anchor" href="#前置知識" aria-label="Permalink to &quot;前置知識&quot;">​</a></h2><ul><li>了解 Git 提交歷史的概念</li><li>會使用 git log 查看提交記錄</li><li>知道什麼是 commit、HEAD</li></ul><h2 id="為什麼需要回退" tabindex="-1">為什麼需要回退？ <a class="header-anchor" href="#為什麼需要回退" aria-label="Permalink to &quot;為什麼需要回退？&quot;">​</a></h2><p>常見情境（都是血淚史）：</p><ul><li>錯誤的功能已推送到遠端（糟糕！）</li><li>某個提交導致 bug（誰寫的！...是我）</li><li>想暫時移除某些改動以便測試（先拿掉看看）</li></ul><p><strong>錯誤做法</strong>：直接刪除程式碼再提交（無法追溯，跳進火坑）<br><strong>正確做法</strong>：用 Git 工具安全回退（優雅地後退 ）</p><h2 id="revert-生成反向提交" tabindex="-1">Revert：生成反向提交 <a class="header-anchor" href="#revert-生成反向提交" aria-label="Permalink to &quot;Revert：生成反向提交&quot;">​</a></h2><h3 id="運作原理" tabindex="-1">運作原理 <a class="header-anchor" href="#運作原理" aria-label="Permalink to &quot;運作原理&quot;">​</a></h3><p><code>revert</code> 會建立一個<strong>新的提交</strong>，內容是「撤銷」指定提交的改動。就像拍電影的倒帶鏡頭，但原片還在</p>',11),y=t(`<p>歷史記錄：<code>A B C Revert B</code>（B 仍存在，只是被反向了）</p><h3 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to &quot;基本用法&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退單個提交（取消這個錯誤）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退最近一次提交（剛剛那個不要了）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退但不自動提交（我想自己寫訊息）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-commit</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre></div><h3 id="批量回退" tabindex="-1">批量回退 <a class="header-anchor" href="#批量回退" aria-label="Permalink to &quot;批量回退&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退從 old_commit 到 new_commit 之間的所有提交</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-commit</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">old_commi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">t</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">..</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">new_commi</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">t</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Revert changes from X to Y</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span></span></code></pre></div><p>範例：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 假設有提交 A  B  C  D  E</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 想回退 C、D、E（這三個都有問題）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -5</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># e5f6g7h (HEAD) E</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># d4e5f6g D</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># c3d4e5f C</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># b2c3d4e B</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># a1b2c3d A</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> b2c3d4e..e5f6g7h</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Revert changes C to E</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div><h2 id="reset-重寫歷史" tabindex="-1">Reset：重寫歷史 <a class="header-anchor" href="#reset-重寫歷史" aria-label="Permalink to &quot;Reset：重寫歷史&quot;">​</a></h2><h3 id="運作原理-1" tabindex="-1">運作原理 <a class="header-anchor" href="#運作原理-1" aria-label="Permalink to &quot;運作原理&quot;">​</a></h3><p><code>reset</code> 會<strong>移動 HEAD 指針</strong>，改變提交歷史。就像用橡皮擦把歷史擦掉（危險！）</p>`,10),m=t(`<p>歷史記錄：<code>A B</code>（C 被完全移除，消失了）</p><h3 id="三種模式" tabindex="-1">三種模式 <a class="header-anchor" href="#三種模式" aria-label="Permalink to &quot;三種模式&quot;">​</a></h3><table><thead><tr><th>模式</th><th>影響範圍</th><th>使用情境</th></tr></thead><tbody><tr><td><code>--soft</code></td><td>只移動 HEAD</td><td>保留改動在暫存區，可重新提交</td></tr><tr><td><code>--mixed</code>（預設）</td><td>HEAD + 暫存區</td><td>保留改動在工作區，需重新 add</td></tr><tr><td><code>--hard</code></td><td>HEAD + 暫存區 + 工作區</td><td><strong>完全刪除改動</strong>，謹慎使用！</td></tr></tbody></table><h3 id="基本用法-1" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法-1" aria-label="Permalink to &quot;基本用法&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退到上一個提交（保留改動在暫存區，溫柔模式）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --soft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退到上一個提交（保留改動在工作區，普通模式）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --mixed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退並完全刪除改動（核彈模式！）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --hard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退到指定提交</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --hard</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">危險！核彈按鈕！</p><p><code>--hard</code> 會<strong>永久刪除</strong>未提交的改動！<br> 使用前請確認：</p><ol><li>已備份重要程式碼（存好了嗎？）</li><li>確定不需要這些改動（真的不要了？）</li><li>該分支無人使用（只有我在用吧？）</li></ol><p>不然就等著後悔莫及</p></div><h2 id="revert-vs-reset-比較" tabindex="-1">Revert vs Reset 比較 <a class="header-anchor" href="#revert-vs-reset-比較" aria-label="Permalink to &quot;Revert vs Reset 比較&quot;">​</a></h2><table><thead><tr><th>特性</th><th>Revert</th><th>Reset</th></tr></thead><tbody><tr><td>歷史記錄</td><td>保留（新增反向提交）</td><td>重寫（刪除提交）</td></tr><tr><td>安全性</td><td>高（溫柔模式）</td><td>低（狠心模式）</td></tr><tr><td>已推送的提交</td><td>推薦</td><td>避免</td></tr><tr><td>團隊協作</td><td>安全</td><td>危險</td></tr><tr><td>追蹤性</td><td>可追溯</td><td>無法追溯</td></tr></tbody></table><h3 id="決策樹" tabindex="-1">決策樹 <a class="header-anchor" href="#決策樹" aria-label="Permalink to &quot;決策樹&quot;">​</a></h3>`,9),C=t(`<h2 id="實戰練習" tabindex="-1">實戰練習 <a class="header-anchor" href="#實戰練習" aria-label="Permalink to &quot;實戰練習&quot;">​</a></h2><h3 id="練習-1-簡單" tabindex="-1">練習 1（簡單） <a class="header-anchor" href="#練習-1-簡單" aria-label="Permalink to &quot;練習 1（簡單）&quot;">​</a></h3><p>你在本地做了一個錯誤提交（未推送），想回退但保留程式碼以便修改。</p><details class="details custom-block"><summary>參考答案</summary><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看提交歷史</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 回退到上一個提交，改動保留在工作區（還能改）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --mixed</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 或用 --soft 保留在暫存區（已經 add 好了）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --soft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 修改後重新提交</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">fix: correct implementation</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div></details><h3 id="練習-2-簡單" tabindex="-1">練習 2（簡單） <a class="header-anchor" href="#練習-2-簡單" aria-label="Permalink to &quot;練習 2（簡單）&quot;">​</a></h3><p>已推送的提交有問題，需要安全回退。</p><details class="details custom-block"><summary>參考答案</summary><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看要回退的提交</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 假設要回退 abc1234</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> abc1234</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 編輯器會打開，填寫回退原因</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 儲存後自動建立反向提交</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 推送到遠端</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span></span></code></pre></div></details><h3 id="練習-3-中等" tabindex="-1">練習 3（中等） <a class="header-anchor" href="#練習-3-中等" aria-label="Permalink to &quot;練習 3（中等）&quot;">​</a></h3><p>需要回退最近 3 個提交（已推送），但想合併成一個 revert 提交。</p><details class="details custom-block"><summary>參考答案與思路</summary><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1. 查看提交歷史</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -5</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># e5f6g7h (HEAD) third commit</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># d4e5f6g second commit</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># c3d4e5f first commit</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># b2c3d4e good commit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2. 批量回退（不自動提交）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-commit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> b2c3d4e..e5f6g7h</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3. 檢視暫存區</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 4. 統一提交</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Revert: rollback last 3 commits due to bug</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 5. 推送</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span></span></code></pre></div><p><strong>思路：</strong></p><ul><li><code>--no-commit</code> 讓多個 revert 合併成一個提交</li><li>範圍用 <code>&lt;old&gt;..&lt;new&gt;</code> 指定（不包含 old）</li><li>統一的提交訊息更清楚（一目了然）</li></ul></details><hr><h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h2><h3 id="q-誤用-reset-hard-刪除了改動-能救回嗎" tabindex="-1">Q: 誤用 reset --hard 刪除了改動，能救回嗎？ <a class="header-anchor" href="#q-誤用-reset-hard-刪除了改動-能救回嗎" aria-label="Permalink to &quot;Q: 誤用 reset --hard 刪除了改動，能救回嗎？&quot;">​</a></h3><p>可能可以！Git 有垃圾回收機制，短時間內可用 <code>reflog</code> 找回（救命符）：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reflog</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 找到刪除前的 commit-id</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --hard</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commit-i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 穿越回去</span></span></code></pre></div><h3 id="q-revert-一個-merge-commit-怎麼做" tabindex="-1">Q: Revert 一個 merge commit 怎麼做？ <a class="header-anchor" href="#q-revert-一個-merge-commit-怎麼做" aria-label="Permalink to &quot;Q: Revert 一個 merge commit 怎麼做？&quot;">​</a></h3><p>需要指定父提交：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> revert</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">merge-commit-i</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">d</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span></span></code></pre></div><p><code>-m 1</code> 表示保留主線（通常是 main），刪除合併進來的分支。</p><h3 id="q-reset-後能再-push-嗎" tabindex="-1">Q: Reset 後能再 Push 嗎？ <a class="header-anchor" href="#q-reset-後能再-push-嗎" aria-label="Permalink to &quot;Q: Reset 後能再 Push 嗎？&quot;">​</a></h3><ul><li>若<strong>尚未推送</strong>：直接 push（沒問題）</li><li>若<strong>已推送</strong>：需 <code>push -f</code>（危險！會影響他人，小心被追殺）</li></ul><h3 id="q-多人協作時不小心-reset-了公開分支" tabindex="-1">Q: 多人協作時不小心 reset 了公開分支？ <a class="header-anchor" href="#q-多人協作時不小心-reset-了公開分支" aria-label="Permalink to &quot;Q: 多人協作時不小心 reset 了公開分支？&quot;">​</a></h3><p>立即通知團隊，請大家：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fetch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --hard</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin/main</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 同步到遠端狀態</span></span></code></pre></div><p>未來避免在公開分支用 reset（別再犯了）。</p><h2 id="延伸閱讀" tabindex="-1">延伸閱讀 <a class="header-anchor" href="#延伸閱讀" aria-label="Permalink to &quot;延伸閱讀&quot;">​</a></h2>`,26),B=t('<h2 id="總結" tabindex="-1">總結 <a class="header-anchor" href="#總結" aria-label="Permalink to &quot;總結&quot;">​</a></h2><ol><li><strong>Revert</strong>：生成反向提交，保留歷史，適合已推送的提交（溫柔模式 ）。</li><li><strong>Reset</strong>：重寫歷史，適合本地未推送的提交（狠心模式 ）。</li><li>批量回退用 <code>revert --no-commit &lt;old&gt;..&lt;new&gt;</code>（一次處理多個）。</li><li><code>--hard</code> 會永久刪除改動，謹慎使用（核彈按鈕不要亂按）。</li><li>多人協作優先用 revert，避免破壞他人歷史（當個好隊友）。</li></ol><p>掌握 Revert 和 Reset，你就是時光機駕駛員！</p>',3);function u(v,E,b,_,f,q){const h=n("Mermaid"),p=n("VPNolebaseInlineLinkPreview"),d=n("NolebaseGitContributors"),o=n("NolebaseGitChangelog");return l(),c("div",null,[D,(l(),k(r,null,{default:s(()=>[i(h,{id:"mermaid-63",class:"mermaid",graph:"gitGraph%0A%20%20%20%20commit%20id%3A%20%22A%22%0A%20%20%20%20commit%20id%3A%20%22B%20(%E9%8C%AF%E8%AA%A4)%22%0A%20%20%20%20commit%20id%3A%20%22C%22%0A%20%20%20%20commit%20id%3A%20%22Revert%20B%22%20type%3A%20REVERSE%0A"})]),fallback:s(()=>[a(" Loading... ")]),_:1})),y,(l(),k(r,null,{default:s(()=>[i(h,{id:"mermaid-88",class:"mermaid",graph:"gitGraph%0A%20%20%20%20commit%20id%3A%20%22A%22%0A%20%20%20%20commit%20id%3A%20%22B%22%0A%20%20%20%20commit%20id%3A%20%22C%20(%E9%8C%AF%E8%AA%A4)%22%20tag%3A%20%22reset%20%E5%89%8D%22%0A%20%20%20%20commit%20id%3A%20%22reset%20--hard%22%20type%3A%20HIGHLIGHT%20tag%3A%20%22%E7%A7%BB%E9%99%A4%20C%22%0A"})]),fallback:s(()=>[a(" Loading... ")]),_:1})),m,(l(),k(r,null,{default:s(()=>[i(h,{id:"mermaid-252",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E9%9C%80%E8%A6%81%E5%9B%9E%E9%80%80%E6%8F%90%E4%BA%A4%5D%20--%3E%20B%7B%E5%B7%B2%E6%8E%A8%E9%80%81%E5%88%B0%E9%81%A0%E7%AB%AF%3F%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%E4%BD%BF%E7%94%A8%20revert%3Cbr%2F%3E%E6%BA%AB%E6%9F%94%E6%A8%A1%E5%BC%8F%5D%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20D%7B%E9%9C%80%E8%A6%81%E4%BF%9D%E7%95%99%E6%94%B9%E5%8B%95%3F%7D%0A%20%20%20%20D%20--%3E%7C%E6%98%AF%7C%20E%5Breset%20--soft%2Fmixed%3Cbr%2F%3E%E4%BF%9D%E7%95%99%E6%94%B9%E5%8B%95%5D%0A%20%20%20%20D%20--%3E%7C%E5%90%A6%7C%20F%5Breset%20--hard%3Cbr%2F%3E%E5%85%A8%E9%83%A8%E5%88%AA%E9%99%A4%5D%0A%20%20%20%20C%20--%3E%20G%5Bgit%20push%5D%0A%20%20%20%20E%20--%3E%20H%5B%E9%87%8D%E6%96%B0%E4%BF%AE%E6%94%B9%E5%BE%8C%E6%8F%90%E4%BA%A4%5D%0A%20%20%20%20F%20--%3E%20I%5B%E7%A2%BA%E8%AA%8D%E5%88%AA%E9%99%A4%5D%0A"})]),fallback:s(()=>[a(" Loading... ")]),_:1})),C,e("ul",null,[e("li",null,[i(p,{href:"./git-commit"},{default:s(()=>[a("git-commit.md")]),_:1}),a(" - Commit 訊息規範")]),e("li",null,[i(p,{href:"./git-branch"},{default:s(()=>[a("git-branch.md")]),_:1}),a(" - 分支管理")]),e("li",null,[i(p,{href:"https://git-scm.com/book/en/v2/Git-Basics-Undoing-Things",target:"_blank",rel:"noreferrer"},{default:s(()=>[a("Pro Git: Undoing Things")]),_:1})])]),B,i(d),i(o)])}const T=A(g,[["render",u]]);export{R as __pageData,T as default};
