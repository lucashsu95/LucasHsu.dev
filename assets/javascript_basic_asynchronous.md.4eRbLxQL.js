import{_ as d,c as g,b as y,w as i,au as o,m as a,J as s,V as l,E as n,o as t,a as h}from"./chunks/framework.C9sE8QFS.js";const P=JSON.parse('{"title":"ç•°åŒæ­¥ - Asynchronous","description":"ç”¨æ—©é¤æµç¨‹è§£é‡‹åŒæ­¥èˆ‡ç•°æ­¥ã€Promiseã€async/awaitï¼Œå«éŒ¯èª¤è™•ç†ã€äº‹ä»¶è¿´åœˆèˆ‡ç·´ç¿’é¡Œã€‚","frontmatter":{"head":[["meta",{"name":"author","content":"è¨±æ©ç¶¸"}],["meta",{"name":"keywords","content":"éåŒæ­¥,ç•°åŒæ­¥,promise,javascript,async,await"}],["meta",{"property":"og:title","content":"éåŒæ­¥æ˜¯ä»€éº¼?èƒ½åƒå—?"}],["meta",{"property":"og:description","content":"åˆ©ç”¨æº–å‚™æ—©é¤çš„ä¾‹å­ï¼Œå¿«é€Ÿäº†è§£ç•°æ­¥ï¼ˆAsynchronousï¼‰èˆ‡åŒæ­¥ï¼ˆSynchronousï¼‰çš„å·®åˆ¥"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://lucashsu95.github.io/LucasHsu.dev/images/javascript-cover.jpg"}],["meta",{"name":"description","content":"ç”¨æ—©é¤æµç¨‹è§£é‡‹åŒæ­¥èˆ‡ç•°æ­¥ã€Promiseã€async/awaitï¼Œå«éŒ¯èª¤è™•ç†ã€äº‹ä»¶è¿´åœˆèˆ‡ç·´ç¿’é¡Œã€‚"}]]},"headers":[],"relativePath":"javascript/basic/asynchronous.md","filePath":"javascript/basic/asynchronous.md","lastUpdated":1767109375000}'),A={name:"javascript/basic/asynchronous.md"},c=l(`<h1 id="ç•°åŒæ­¥-asynchronous" tabindex="-1">ç•°åŒæ­¥ - Asynchronous <a class="header-anchor" href="#ç•°åŒæ­¥-asynchronous" aria-label="Permalink to &quot;ç•°åŒæ­¥ - Asynchronous&quot;">â€‹</a></h1><blockquote><p>ğŸ“ TL;DR</p></blockquote><ul><li>åŒæ­¥æœƒé˜»å¡ä¸»åŸ·è¡Œç·’ï¼›ç•°æ­¥æŠŠè€—æ™‚å·¥ä½œäº¤çµ¦èƒŒæ™¯ï¼Œä¸»æµç¨‹ç¹¼çºŒè·‘ã€‚</li><li>Promise æ˜¯ã€Œæœªä¾†å€¼ã€çš„å®¹å™¨ï¼Œ<code>then/catch</code> æˆ– <code>async/await</code> éƒ½åœ¨ç­‰å®ƒ resolve/rejectã€‚</li><li>å¯¦å‹™è¦è™•ç†ï¼šéŒ¯èª¤å‚³éã€åŸ·è¡Œé †åºï¼ˆä¸²è¡Œ/ä¸¦è¡Œï¼‰ã€å–æ¶ˆèˆ‡é€¾æ™‚ï¼ˆä¾‹å¦‚ <code>AbortController</code>ï¼‰ã€‚</li></ul><h2 id="å‰ç½®çŸ¥è­˜" tabindex="-1">å‰ç½®çŸ¥è­˜ <a class="header-anchor" href="#å‰ç½®çŸ¥è­˜" aria-label="Permalink to &quot;å‰ç½®çŸ¥è­˜&quot;">â€‹</a></h2><ul><li>JavaScript å–®åŸ·è¡Œç·’ã€äº‹ä»¶è¿´åœˆã€å·¥ä½œä½‡åˆ—ï¼ˆtask queueã€microtask queueï¼‰ã€‚</li><li>ES6 æ¨¡çµ„èˆ‡ <code>import</code> åŸºæœ¬ç”¨æ³•ã€‚</li><li>HTTP æœƒèŠ±æ™‚é–“ä¸”å¯èƒ½å¤±æ•—ï¼šè«‹æ±‚é€¾æ™‚ã€é€£ç·šä¸­æ–·ã€‚</li></ul><h2 id="ä»€éº¼æ˜¯ç•°æ­¥ç·¨ç¨‹" tabindex="-1">ä»€éº¼æ˜¯ç•°æ­¥ç·¨ç¨‹ï¼Ÿ <a class="header-anchor" href="#ä»€éº¼æ˜¯ç•°æ­¥ç·¨ç¨‹" aria-label="Permalink to &quot;ä»€éº¼æ˜¯ç•°æ­¥ç·¨ç¨‹ï¼Ÿ&quot;">â€‹</a></h2><p>åœ¨ JavaScript ä¸­ï¼Œç•°æ­¥ï¼ˆAsynchronousï¼‰èˆ‡åŒæ­¥ï¼ˆSynchronousï¼‰ç›¸å°ã€‚</p><p>åŒæ­¥ç·¨ç¨‹æ˜¯æŒ‡ä»£ç¢¼æŒ‰é †åºåŸ·è¡Œï¼Œè€Œç•°æ­¥ç·¨ç¨‹å‰‡å…è¨±æŸäº›ä»»å‹™åœ¨å¾Œå°é€²è¡Œï¼Œä¸»ç¨‹åºå¯ä»¥ç¹¼çºŒåŸ·è¡Œå…¶ä»–ä»£ç¢¼ã€‚</p><p>ä¾‹å¦‚ï¼Œç•¶ä½ å¾ç¶²è·¯ç²å–è³‡æ–™æ™‚ï¼Œå¦‚æœä½¿ç”¨åŒæ­¥æ–¹å¼ï¼Œç¨‹å¼æœƒåœä¸‹ä¾†ç­‰è³‡æ–™å›ä¾†ï¼›è€Œä½¿ç”¨ç•°æ­¥æ–¹å¼ï¼Œç¨‹å¼å¯ä»¥åœ¨ç­‰å¾…è³‡æ–™çš„åŒæ™‚åšå…¶ä»–äº‹æƒ…ã€‚</p><h2 id="æº–å‚™æ—©é¤çš„ä¾‹å­" tabindex="-1">æº–å‚™æ—©é¤çš„ä¾‹å­ <a class="header-anchor" href="#æº–å‚™æ—©é¤çš„ä¾‹å­" aria-label="Permalink to &quot;æº–å‚™æ—©é¤çš„ä¾‹å­&quot;">â€‹</a></h2><p>æƒ³åƒä¸€ä¸‹ï¼Œä½ æ—©ä¸Šèµ·åºŠå¾Œæ±ºå®šæº–å‚™æ—©é¤<s>ä¸è¦è·Ÿæˆ‘èªªä½ ä¸åƒæ—©é¤</s>ã€‚ä½ æœ‰å¹¾å€‹ä»»å‹™éœ€è¦å®Œæˆï¼š</p><ol><li>ç…®å’–å•¡</li><li>çƒ¤åå¸</li><li>ç…è›‹</li></ol><h3 id="åŒæ­¥æ–¹å¼" tabindex="-1">åŒæ­¥æ–¹å¼ <a class="header-anchor" href="#åŒæ­¥æ–¹å¼" aria-label="Permalink to &quot;åŒæ­¥æ–¹å¼&quot;">â€‹</a></h3><p>å¦‚æœä½ ä½¿ç”¨åŒæ­¥æ–¹å¼ï¼Œä½ æœƒé€™æ¨£åšï¼š</p><ol><li>é–‹å§‹ç…®å’–å•¡ï¼Œç­‰å’–å•¡ç…®å¥½ï¼ˆé€™å¯èƒ½éœ€è¦å¹¾åˆ†é˜ï¼‰ã€‚</li><li>ç„¶å¾Œé–‹å§‹çƒ¤åå¸ï¼Œç­‰åå¸çƒ¤å¥½ã€‚</li><li>æœ€å¾Œç…è›‹ã€‚</li></ol><p>åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œä½ å¿…é ˆç­‰æ¯å€‹ä»»å‹™å®Œæˆå¾Œæ‰èƒ½é–‹å§‹ä¸‹ä¸€å€‹ï¼Œé€™æ¨£æœƒ<strong>æµªè²»æ™‚é–“</strong>ã€‚</p><h3 id="ç•°æ­¥æ–¹å¼" tabindex="-1">ç•°æ­¥æ–¹å¼ <a class="header-anchor" href="#ç•°æ­¥æ–¹å¼" aria-label="Permalink to &quot;ç•°æ­¥æ–¹å¼&quot;">â€‹</a></h3><p>å¦‚æœä½¿ç”¨ç•°æ­¥æ–¹å¼ï¼Œä½ å¯ä»¥é€™æ¨£åšï¼š</p><ol><li>é–‹å§‹ç…®å’–å•¡ï¼ˆé€™æ˜¯è€—æ™‚çš„ä»»å‹™ï¼‰ï¼Œç„¶å¾ŒæŠŠé‹å­æ”¾åœ¨çˆå­ä¸Šã€‚</li><li>åŒæ™‚é–‹å§‹çƒ¤åå¸ï¼ˆä¹Ÿæ”¾é€²çƒ¤ç®±ï¼‰ã€‚</li><li>æœ€å¾Œé–‹å§‹ç…è›‹ã€‚</li></ol><p>åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œä½ ä¸éœ€è¦ç­‰å’–å•¡ç…®å¥½å°±å»çƒ¤åå¸å’Œç…è›‹ï¼Œæ‰€æœ‰ä»»å‹™å¯ä»¥åŒæ™‚é€²è¡Œï¼Œé€™æ¨£å¯ä»¥æ›´å¿«åœ°å®Œæˆæ—©é¤ã€‚</p><h2 id="promise" tabindex="-1">Promise <a class="header-anchor" href="#promise" aria-label="Permalink to &quot;Promise&quot;">â€‹</a></h2><p>å…ˆæŠŠåŸºæœ¬æ“ä½œè¬›å®Œï¼Œå¾Œé¢å†ä¾†å¯¦ä½œ</p><p><strong>Promise</strong> æ˜¯ä¸€ç¨®ç”¨æ–¼è™•ç†ç•°æ­¥æ“ä½œçš„ç‰©ä»¶ï¼Œå®ƒä»£è¡¨äº†ä¸€å€‹å°šæœªå®Œæˆä½†é è¨ˆæœƒåœ¨å°‡ä¾†å®Œæˆçš„æ“ä½œã€‚Promise æœ‰ä¸‰ç¨®ç‹€æ…‹ï¼šå¾…å®šï¼ˆpendingï¼‰ã€å·²è§£æ±ºï¼ˆfulfilledï¼‰ã€å·²æ‹’çµ•ï¼ˆrejectedï¼‰ã€‚</p><h3 id="ä»€éº¼æ™‚å€™ç”¨-promise" tabindex="-1">ä»€éº¼æ™‚å€™ç”¨ Promiseï¼Ÿ <a class="header-anchor" href="#ä»€éº¼æ™‚å€™ç”¨-promise" aria-label="Permalink to &quot;ä»€éº¼æ™‚å€™ç”¨ Promiseï¼Ÿ&quot;">â€‹</a></h3><ul><li>éœ€è¦ç­‰å¾…çš„ä»»å‹™ï¼šæ‰“ APIã€è®€æª”æ¡ˆã€è¨ˆæ™‚å™¨ã€‚</li><li>æƒ³é¿å…å·¢ç‹€å›å‘¼ï¼Œè®“æˆåŠŸèˆ‡å¤±æ•—é›†ä¸­è™•ç†ã€‚</li></ul><h3 id="å¸¸è¦‹éŒ¯èª¤è™•ç†æ‰‹æ³•" tabindex="-1">å¸¸è¦‹éŒ¯èª¤è™•ç†æ‰‹æ³• <a class="header-anchor" href="#å¸¸è¦‹éŒ¯èª¤è™•ç†æ‰‹æ³•" aria-label="Permalink to &quot;å¸¸è¦‹éŒ¯èª¤è™•ç†æ‰‹æ³•&quot;">â€‹</a></h3><ul><li><code>then().catch()</code>ï¼šç°¡å–®ä¸²æ¥å³å¯ã€‚</li><li><code>async/await</code> + <code>try/catch</code>ï¼šç›´è¦ºï¼Œé©åˆé•·æµç¨‹ã€‚</li><li>é€¾æ™‚ä¿è­·ï¼š<code>Promise.race([work, timeoutPromise])</code>ã€‚</li></ul><h3 id="ç¯„ä¾‹" tabindex="-1">ç¯„ä¾‹ <a class="header-anchor" href="#ç¯„ä¾‹" aria-label="Permalink to &quot;ç¯„ä¾‹&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">let</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> myPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    let</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> success</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å‡è¨­é€™æ˜¯ä¸€å€‹éš¨æ©Ÿçµæœ(å¯ä»¥æ˜¯trueæˆ–æ˜¯false)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">success</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">æˆåŠŸï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç•¶ä»»å‹™æˆåŠŸæ™‚èª¿ç”¨ resolve</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> else</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">å¤±æ•—ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç•¶ä»»å‹™å¤±æ•—æ™‚èª¿ç”¨ reject</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    },</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ¨¡æ“¬ä¸€å€‹è€—æ™‚çš„æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ä½¿ç”¨ .then() è™•ç†çµæœ</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">myPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: æˆåŠŸï¼</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: å¤±æ•—ï¼</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">});</span></span></code></pre></div><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å‰µå»ºäº†ä¸€å€‹ Promiseï¼Œæ¨¡æ“¬äº†ä¸€å€‹è€—æ™‚å…©ç§’çš„æ“ä½œã€‚ç•¶æ“ä½œæˆåŠŸæ™‚ï¼Œæœƒèª¿ç”¨ <code>resolve</code>ï¼Œä¸¦åœ¨ <code>.then()</code> ä¸­è™•ç†çµæœï¼›å¦‚æœå¤±æ•—ï¼Œå‰‡èª¿ç”¨ <code>reject</code>ï¼Œä¸¦åœ¨ <code>.catch()</code> ä¸­è™•ç†éŒ¯èª¤ã€‚</p><h3 id="éŒ¯èª¤åŒ…è£èˆ‡é€¾æ™‚ä¿è­·" tabindex="-1">éŒ¯èª¤åŒ…è£èˆ‡é€¾æ™‚ä¿è­· <a class="header-anchor" href="#éŒ¯èª¤åŒ…è£èˆ‡é€¾æ™‚ä¿è­·" aria-label="Permalink to &quot;éŒ¯èª¤åŒ…è£èˆ‡é€¾æ™‚ä¿è­·&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> delay</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fetchWithTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> timeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {})</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> AbortController</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> timer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> delay</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">timeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">abort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fetch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> signal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">signal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">race</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">([</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> timer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ===</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AbortError</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> return</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è«‹æ±‚é€¾æ™‚</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        return</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">message</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ||</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">æœªçŸ¥éŒ¯èª¤</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    });</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span></code></pre></div><p>é€™æ®µç¤ºç¯„äº†ï¼š</p><ul><li>ç”¨ <code>Promise.race</code> åšé€¾æ™‚ä¿è­·ï¼›</li><li>é€é <code>AbortController</code> å–æ¶ˆè«‹æ±‚ï¼Œé¿å…è³‡æºæµªè²»ã€‚</li></ul><h2 id="async-await" tabindex="-1">async/await <a class="header-anchor" href="#async-await" aria-label="Permalink to &quot;async/await&quot;">â€‹</a></h2><p><strong>async/await</strong> æ˜¯åŸºæ–¼ Promise çš„èªæ³•ç³–ï¼Œä½¿å¾—ç•°æ­¥ä»£ç¢¼çœ‹èµ·ä¾†æ›´åƒåŒæ­¥ä»£ç¢¼ã€‚ä½¿ç”¨ <code>async</code> é—œéµå­—å®šç¾©ä¸€å€‹å‡½æ•¸ç‚ºç•°æ­¥å‡½æ•¸ï¼Œè€Œ <code>await</code> ç”¨ä¾†æš«åœå‡½æ•¸çš„åŸ·è¡Œç›´åˆ° Promise è¢«è§£æ±ºã€‚</p><h3 id="ç¯„ä¾‹-1" tabindex="-1">ç¯„ä¾‹ <a class="header-anchor" href="#ç¯„ä¾‹-1" aria-label="Permalink to &quot;ç¯„ä¾‹&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fetchData</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    try</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        let</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> myPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾… myPromise å®Œæˆ</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">result</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: æˆåŠŸï¼</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: å¤±æ•—ï¼</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fetchData</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // èª¿ç”¨ç•°æ­¥å‡½æ•¸</span></span></code></pre></div><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å®šç¾©äº†ä¸€å€‹ <code>fetchData</code> çš„ç•°æ­¥å‡½æ•¸ã€‚åœ¨é€™è£¡ï¼Œæˆ‘å€‘ä½¿ç”¨ <code>await</code> ä¾†ç­‰å¾… <code>myPromise</code> çš„çµæœã€‚å¦‚æœ Promise è¢«è§£æ±ºï¼Œå°±æœƒè¼¸å‡ºæˆåŠŸçš„è¨Šæ¯ï¼›å¦‚æœè¢«æ‹’çµ•ï¼Œå°±æœƒæ•ç²éŒ¯èª¤ä¸¦è¼¸å‡ºã€‚</p><h3 id="ä¸²è¡Œ-vs-ä¸¦è¡Œ" tabindex="-1">ä¸²è¡Œ vs ä¸¦è¡Œ <a class="header-anchor" href="#ä¸²è¡Œ-vs-ä¸¦è¡Œ" aria-label="Permalink to &quot;ä¸²è¡Œ vs ä¸¦è¡Œ&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ä¸²è¡Œï¼šä¾åºç­‰å¾…ï¼Œç¸½æ™‚é–“ â‰ˆ æ‰€æœ‰ä»»å‹™æ™‚é–“ç¸½å’Œ</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> serial</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">];</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ä¸¦è¡Œï¼šåŒæ™‚é–‹å·¥ï¼Œç¸½æ™‚é–“ â‰ˆ æœ€æ…¢ä»»å‹™</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> parallel</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">([</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()]);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">];</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><p>é¸æ“‡åŸå‰‡ï¼š</p><ul><li>æœ‰ç›¸ä¾æ€§å°±ä¸²è¡Œï¼ˆä¾‹å¦‚å…ˆæ‹¿ token å†æ‰“ APIï¼‰ã€‚</li><li>æ²’ç›¸ä¾æ€§å°±ä¸¦è¡Œï¼ˆä¾‹å¦‚å¤šæ”¯åˆ—è¡¨ APIï¼‰ã€‚</li></ul><h2 id="å¯¦ä½œ-æº–å‚™æ—©é¤" tabindex="-1">å¯¦ä½œ - æº–å‚™æ—©é¤ <a class="header-anchor" href="#å¯¦ä½œ-æº–å‚™æ—©é¤" aria-label="Permalink to &quot;å¯¦ä½œ - æº–å‚™æ—©é¤&quot;">â€‹</a></h2><p>å‰é¢çœ‹ä¸æ‡‚å—?æ²’é—œä¿‚<s>æˆ‘ä¹Ÿä¸æ‡‚</s>ï¼Œåœ¨æœ€é¢å‰æœ‰å€‹æ—©é¤çš„ä¾‹å­æˆ‘å€‘ä¾†å¯¦ä½œå®ƒ</p><h3 id="åŒæ­¥ç‰ˆæœ¬" tabindex="-1">åŒæ­¥ç‰ˆæœ¬ <a class="header-anchor" href="#åŒæ­¥ç‰ˆæœ¬" aria-label="Permalink to &quot;åŒæ­¥ç‰ˆæœ¬&quot;">â€‹</a></h3><p>ä½¿ç”¨åŒæ­¥ç‰ˆæœ¬å°±æ˜¯<strong>ç­‰ä¸€ä»¶äº‹åšå¥½æ‰åšä¸‹ä¸€ä»¶äº‹</strong>ï¼Œå¾ˆæµªè²»æ™‚é–“ï¼Œä½†æˆ‘å€‘å…ˆä¾†å¯¦ä½œé€™å€‹æ–¹æ³•</p><h3 id="ç¯„ä¾‹ä¸€-åŒæ­¥æ–¹å¼æº–å‚™æ—©é¤" tabindex="-1">ç¯„ä¾‹ä¸€ï¼šåŒæ­¥æ–¹å¼æº–å‚™æ—©é¤ <a class="header-anchor" href="#ç¯„ä¾‹ä¸€-åŒæ­¥æ–¹å¼æº–å‚™æ—©é¤" aria-label="Permalink to &quot;ç¯„ä¾‹ä¸€ï¼šåŒæ­¥æ–¹å¼æº–å‚™æ—©é¤&quot;">â€‹</a></h3><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨åŒæ­¥æ–¹å¼ä¾†æº–å‚™æ—©é¤ã€‚é€™æ„å‘³è‘—æ¯å€‹ä»»å‹™éƒ½å¿…é ˆç­‰å‰ä¸€å€‹ä»»å‹™å®Œæˆå¾Œæ‰èƒ½é–‹å§‹ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹ç…®å’–å•¡...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // æ¨¡æ“¬ç…®å’–å•¡éœ€è¦2ç§’</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {}</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…2ç§’</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">å’–å•¡å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹çƒ¤åå¸...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // æ¨¡æ“¬çƒ¤åå¸éœ€è¦1.5ç§’</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {}</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…1.5ç§’</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">åå¸çƒ¤å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fryEgg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹ç…è›‹...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // æ¨¡æ“¬ç…è›‹éœ€è¦1ç§’</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    while</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Date</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">now</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &lt;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {}</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…1ç§’</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è›‹ç…å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// åŒæ­¥åŸ·è¡Œæ‰€æœ‰ä»»å‹™</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> prepareBreakfastSync</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    fryEgg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">æ—©é¤æº–å‚™å®Œæˆï¼Œå¯ä»¥äº«ç”¨äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// èª¿ç”¨åŒæ­¥æº–å‚™æ—©é¤çš„å‡½æ•¸</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">prepareBreakfastSync</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre></div><h4 id="åŒæ­¥ç¯„ä¾‹è§£èªª" tabindex="-1">åŒæ­¥ç¯„ä¾‹è§£èªª <a class="header-anchor" href="#åŒæ­¥ç¯„ä¾‹è§£èªª" aria-label="Permalink to &quot;åŒæ­¥ç¯„ä¾‹è§£èªª&quot;">â€‹</a></h4><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œ<code>makeCoffee</code>ã€<code>makeToast</code> å’Œ <code>fryEgg</code> å‡½æ•¸éƒ½ä½¿ç”¨äº† <code>while</code> è¿´åœˆä¾†æ¨¡æ“¬è€—æ™‚æ“ä½œã€‚é€™æ„å‘³è‘—åœ¨æ¯å€‹ä»»å‹™å®Œæˆä¹‹å‰ï¼Œç¨‹å¼æœƒè¢«é˜»å¡ï¼Œç„¡æ³•åŸ·è¡Œå…¶ä»–ä»»ä½•æ“ä½œã€‚æœ€çµ‚çš„è¼¸å‡ºæœƒæ˜¯ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>é–‹å§‹ç…®å’–å•¡...</span></span>
<span class="line"><span>å’–å•¡å¥½äº†ï¼</span></span>
<span class="line"><span>é–‹å§‹çƒ¤åå¸...</span></span>
<span class="line"><span>åå¸çƒ¤å¥½äº†ï¼</span></span>
<span class="line"><span>é–‹å§‹ç…è›‹...</span></span>
<span class="line"><span>è›‹ç…å¥½äº†ï¼</span></span>
<span class="line"><span>æ—©é¤æº–å‚™å®Œæˆï¼Œå¯ä»¥äº«ç”¨äº†ï¼</span></span></code></pre></div><h3 id="ç¯„ä¾‹äºŒ-ç•°æ­¥æ–¹å¼æº–å‚™æ—©é¤" tabindex="-1">ç¯„ä¾‹äºŒï¼šç•°æ­¥æ–¹å¼æº–å‚™æ—©é¤ <a class="header-anchor" href="#ç¯„ä¾‹äºŒ-ç•°æ­¥æ–¹å¼æº–å‚™æ—©é¤" aria-label="Permalink to &quot;ç¯„ä¾‹äºŒï¼šç•°æ­¥æ–¹å¼æº–å‚™æ—©é¤&quot;">â€‹</a></h3><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ç•°æ­¥æ–¹å¼ä¾†æº–å‚™æ—©é¤ã€‚é€™æ¨£å¯ä»¥åœ¨ç­‰å¾…æŸå€‹ä»»å‹™å®Œæˆçš„åŒæ™‚åŸ·è¡Œå…¶ä»–ä»»å‹™ã€‚</p><div class="info custom-block"><p class="custom-block-title">å°çŸ¥è­˜</p><p><code>setTimeout()</code>æ˜¯ä¸€å€‹éåŒæ­¥çš„å‡½æ•¸å–”ã€‚ç•¶ä½ ä½¿ç”¨<code>setTimeout()</code>è¨­å®šä¸€æ®µå»¶é²å¾ŒåŸ·è¡ŒæŸå€‹å‡½æ•¸æ™‚ï¼ŒJavaScript ä¸æœƒç­‰å¾…é€™æ®µæ™‚é–“çµæŸï¼Œè€Œæ˜¯æœƒç¹¼çºŒåŸ·è¡Œå¾Œé¢çš„ç¨‹å¼ç¢¼ã€‚é€™ä½¿å¾— <code>setTimeout()</code> èƒ½å¤ åœ¨èƒŒæ™¯ä¸­è¨ˆæ™‚ï¼ŒåŒæ™‚ä¸æœƒé˜»å¡ä¸»åŸ·è¡Œç·’ã€‚</p></div><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹ç…®å’–å•¡...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">å’–å•¡å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ¨¡æ“¬ç…®å’–å•¡éœ€è¦2ç§’</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        },</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    });</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹çƒ¤åå¸...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">åå¸çƒ¤å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ¨¡æ“¬çƒ¤åå¸éœ€è¦1.5ç§’</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        },</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    });</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fryEgg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">é–‹å§‹ç…è›‹...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            resolve</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è›‹ç…å¥½äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æ¨¡æ“¬ç…è›‹éœ€è¦1ç§’</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        },</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    });</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ä½¿ç”¨ async/await å‡½æ•¸ä¾†æº–å‚™æ—©é¤</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">async</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> prepareBreakfastAsync</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeCoffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…å’–å•¡åšå¥½</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">coffee</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: å’–å•¡å¥½äº†ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> makeToast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…åå¸çƒ¤å¥½</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">toast</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: åå¸çƒ¤å¥½äº†ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> egg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fryEgg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ç­‰å¾…è›‹ç…å¥½</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">egg</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¼¸å‡º: è›‹ç…å¥½äº†ï¼</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">æ—©é¤æº–å‚™å®Œæˆï¼Œå¯ä»¥äº«ç”¨äº†ï¼</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// èª¿ç”¨ç•°æ­¥æº–å‚™æ—©é¤çš„å‡½æ•¸</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">prepareBreakfastAsync</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre></div><h4 id="ç•°æ­¥ç¯„ä¾‹è§£èªª" tabindex="-1">ç•°æ­¥ç¯„ä¾‹è§£èªª <a class="header-anchor" href="#ç•°æ­¥ç¯„ä¾‹è§£èªª" aria-label="Permalink to &quot;ç•°æ­¥ç¯„ä¾‹è§£èªª&quot;">â€‹</a></h4><p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œ<code>makeCoffee</code>ã€<code>makeToast</code> å’Œ <code>fryEgg</code> å‡½æ•¸è¿”å› Promiseï¼Œä¸¦ä½¿ç”¨ <code>setTimeout</code> ä¾†æ¨¡æ“¬è€—æ™‚æ“ä½œã€‚åœ¨ <code>prepareBreakfastAsync</code> å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨ <code>await</code> ç­‰å¾…æ¯å€‹ä»»å‹™å®Œæˆï¼Œä½†å› ç‚ºæ¯å€‹ä»»å‹™éƒ½æ˜¯ç•°æ­¥çš„ï¼Œæ‰€ä»¥æ•´é«”éç¨‹ä¸æœƒè¢«é˜»å¡ã€‚</p><h4 id="æœ€çµ‚è¼¸å‡º" tabindex="-1">æœ€çµ‚è¼¸å‡º <a class="header-anchor" href="#æœ€çµ‚è¼¸å‡º" aria-label="Permalink to &quot;æœ€çµ‚è¼¸å‡º&quot;">â€‹</a></h4><p>ç•¶ä½ åŸ·è¡Œé€™æ®µç•°æ­¥ä»£ç¢¼æ™‚ï¼Œä½ æœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹çš„è¼¸å‡ºï¼ˆå¤§ç´„éœ€è¦ 2 ç§’ï¼‰ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>é–‹å§‹ç…®å’–å•¡...</span></span>
<span class="line"><span>é–‹å§‹çƒ¤åå¸...</span></span>
<span class="line"><span>é–‹å§‹ç…è›‹...</span></span>
<span class="line"><span>å’–å•¡å¥½äº†ï¼</span></span>
<span class="line"><span>åå¸çƒ¤å¥½äº†ï¼</span></span>
<span class="line"><span>è›‹ç…å¥½äº†ï¼</span></span>
<span class="line"><span>æ—©é¤æº–å‚™å®Œæˆï¼Œå¯ä»¥äº«ç”¨äº†ï¼</span></span></code></pre></div><p>é€éä»¥ä¸Šå…©å€‹ç¯„ä¾‹ï¼Œæˆ‘å€‘å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ç•°æ­¥ç·¨ç¨‹çš„å„ªå‹¢ã€‚<br> åœ¨åŒæ­¥æ–¹å¼ä¸­ï¼Œæ¯å€‹ä»»å‹™å¿…é ˆç­‰å‰ä¸€å€‹å®Œæˆå¾Œæ‰èƒ½é–‹å§‹ï¼Œå°è‡´æ•´é«”éç¨‹è®Šæ…¢ã€‚<br> è€Œåœ¨ç•°æ­¥æ–¹å¼ä¸­ï¼Œæ‰€æœ‰ä»»å‹™å¯ä»¥åŒæ™‚é€²è¡Œï¼Œæé«˜äº†æ•ˆç‡ï¼Œä½¿å¾—æ•´é«”æµç¨‹æ›´åŠ æµæš¢ã€‚</p><h2 id="äº‹ä»¶è¿´åœˆè¦–è¦ºåŒ–" tabindex="-1">äº‹ä»¶è¿´åœˆè¦–è¦ºåŒ– <a class="header-anchor" href="#äº‹ä»¶è¿´åœˆè¦–è¦ºåŒ–" aria-label="Permalink to &quot;äº‹ä»¶è¿´åœˆè¦–è¦ºåŒ–&quot;">â€‹</a></h2>`,64),B=l(`<h2 id="å¯¦æˆ°ç·´ç¿’" tabindex="-1">å¯¦æˆ°ç·´ç¿’ <a class="header-anchor" href="#å¯¦æˆ°ç·´ç¿’" aria-label="Permalink to &quot;å¯¦æˆ°ç·´ç¿’&quot;">â€‹</a></h2><h3 id="ç·´ç¿’-1-éŒ¯èª¤è™•ç†-ç°¡å–®-â­" tabindex="-1">ç·´ç¿’ 1ï¼šéŒ¯èª¤è™•ç†ï¼ˆç°¡å–®ï¼‰â­ <a class="header-anchor" href="#ç·´ç¿’-1-éŒ¯èª¤è™•ç†-ç°¡å–®-â­" aria-label="Permalink to &quot;ç·´ç¿’ 1ï¼šéŒ¯èª¤è™•ç†ï¼ˆç°¡å–®ï¼‰â­&quot;">â€‹</a></h3><blockquote><p>ä½¿ç”¨ <code>fetch(&quot;https://hp-api.onrender.com/api/spells&quot;)</code>ï¼ŒåŠ ä¸Š 3 ç§’é€¾æ™‚æ©Ÿåˆ¶èˆ‡éŒ¯èª¤æç¤ºã€‚</p></blockquote><details class="details custom-block"><summary>ğŸ’¡ åƒè€ƒç­”æ¡ˆ</summary><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> withTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">race</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">([</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">        new</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">_</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">            setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> reject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> Error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">è«‹æ±‚é€¾æ™‚</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ms</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">        ),</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    ]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">withTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fetch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hp-api.onrender.com/api/spells</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">spells</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">message</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre></div></details><h3 id="ç·´ç¿’-2-ä¸¦è¡Œè«‹æ±‚-ç°¡å–®-â­" tabindex="-1">ç·´ç¿’ 2ï¼šä¸¦è¡Œè«‹æ±‚ï¼ˆç°¡å–®ï¼‰â­ <a class="header-anchor" href="#ç·´ç¿’-2-ä¸¦è¡Œè«‹æ±‚-ç°¡å–®-â­" aria-label="Permalink to &quot;ç·´ç¿’ 2ï¼šä¸¦è¡Œè«‹æ±‚ï¼ˆç°¡å–®ï¼‰â­&quot;">â€‹</a></h3><blockquote><p>åŒæ™‚è«‹æ±‚å…©å€‹å…¬é–‹ APIï¼Œåˆä½µå¾Œå°å‡ºå„è‡ªçš„è³‡æ–™ç­†æ•¸ã€‚</p></blockquote><details class="details custom-block"><summary>ğŸ’¡ åƒè€ƒç­”æ¡ˆ</summary><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> spellPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fetch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hp-api.onrender.com/api/spells</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> nationPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fetch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://datausa.io/api/data?drilldowns=Nation&amp;measures=Population</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">).</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">Promise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">all</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">([</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">spellPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> nationPromise</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">])</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(([</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">spells</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> nations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">])</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">spells:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> spells</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">nations:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> nations</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    })</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre></div></details><h3 id="ç·´ç¿’-3-å–æ¶ˆè«‹æ±‚-ä¸­ç­‰-â­â­" tabindex="-1">ç·´ç¿’ 3ï¼šå–æ¶ˆè«‹æ±‚ï¼ˆä¸­ç­‰ï¼‰â­â­ <a class="header-anchor" href="#ç·´ç¿’-3-å–æ¶ˆè«‹æ±‚-ä¸­ç­‰-â­â­" aria-label="Permalink to &quot;ç·´ç¿’ 3ï¼šå–æ¶ˆè«‹æ±‚ï¼ˆä¸­ç­‰ï¼‰â­â­&quot;">â€‹</a></h3><blockquote><p>ä½¿ç”¨ <code>AbortController</code> åœ¨ 1 ç§’å…§å–æ¶ˆ fetchï¼Œä¸¦åœ¨ UI é¡¯ç¤ºã€Œå·²å–æ¶ˆã€ã€‚</p></blockquote><details class="details custom-block"><summary>ğŸ’¡ åƒè€ƒç­”æ¡ˆèˆ‡æç¤º</summary><p><strong>æç¤ºï¼š</strong></p><ol><li>å»ºç«‹ <code>const controller = new AbortController()</code>ã€‚</li><li>å°‡ <code>signal</code> å‚³çµ¦ <code>fetch</code>ã€‚</li><li>ç”¨ <code>setTimeout(() =&gt; controller.abort(), 1000)</code> å–æ¶ˆã€‚</li></ol><p><strong>åƒè€ƒç­”æ¡ˆï¼š</strong></p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> AbortController</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> timer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> setTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">abort</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fetch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hp-api.onrender.com/api/spells</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> signal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> controller</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">signal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> })</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> res</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">json</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">())</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">then</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">success</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> data</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">length</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">))</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">catch</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">((</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">name</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ===</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">AbortError</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">å·²å–æ¶ˆ</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        else</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">error</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">err</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">message</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    })</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    .</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">finally</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =&gt;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> clearTimeout</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">timer</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span></code></pre></div></details><h2 id="å»¶ä¼¸é–±è®€" tabindex="-1">å»¶ä¼¸é–±è®€ <a class="header-anchor" href="#å»¶ä¼¸é–±è®€" aria-label="Permalink to &quot;å»¶ä¼¸é–±è®€&quot;">â€‹</a></h2>`,11),D=l('<h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">â€‹</a></h2><ul><li><code>then/catch</code> èˆ‡ <code>async/await</code> å·®åœ¨å“ªï¼Ÿ <ul><li>å…©è€…ç­‰åƒ¹ï¼›<code>async/await</code> è®€èµ·ä¾†åƒåŒæ­¥ï¼Œé©åˆé•·æµç¨‹ï¼›<code>then</code> é©åˆç°¡å–®éˆçµæˆ–å‹•æ…‹è™•ç†ã€‚</li></ul></li><li><code>Promise.all</code> å’Œ <code>Promise.allSettled</code> å·®ç•°ï¼Ÿ <ul><li><code>all</code> é‡åˆ°ä¸€å€‹ reject å°±ä¸­æ–·ï¼›<code>allSettled</code> æœƒç­‰å¾…æ‰€æœ‰å®Œæˆä¸¦å›å ±ç‹€æ…‹ï¼Œé©åˆã€Œç›¡é‡æ”¶é›†çµæœã€ã€‚</li></ul></li><li>ä»€éº¼æ™‚å€™éœ€è¦å–æ¶ˆè«‹æ±‚ï¼Ÿ <ul><li>ä½¿ç”¨è€…åˆ‡é ã€è¼¸å…¥æ¡†å¿«é€Ÿè¼¸å…¥å°è‡´èˆŠè«‹æ±‚éæ™‚ï¼Œæˆ–è¡Œå‹•è£ç½®ç¯€çœæµé‡æ™‚ï¼Œå¯ç”¨ <code>AbortController</code> å–æ¶ˆã€‚</li></ul></li></ul>',2);function u(C,m,E,v,q,b){const p=n("Mermaid"),k=n("VPNolebaseInlineLinkPreview"),e=n("NolebaseGitContributors"),r=n("NolebaseGitChangelog");return t(),g("div",null,[c,(t(),y(o,null,{default:i(()=>[s(p,{id:"mermaid-291",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Main%20as%20JS%20%E4%B8%BB%E7%B7%9A%E7%A8%8B%0A%20%20%20%20participant%20WA%20as%20Web%20APIs%0A%20%20%20%20participant%20MT%20as%20Microtask%20Queue%20(VIP%E9%80%9A%E9%81%93)%0A%20%20%20%20participant%20TQ%20as%20Task%20Queue%20(%E6%99%AE%E9%80%9A%E9%80%9A%E9%81%93)%0A%0A%20%20%20%20Note%20over%20Main%3A%201.%20%E7%A8%8B%E5%BC%8F%E9%96%8B%E5%A7%8B%0A%0A%20%20%20%20Main-%3E%3EWA%3A%20%E5%91%BC%E5%8F%AB%20setTimeout(cb%2C%200)%0A%20%20%20%20Note%20right%20of%20Main%3A%20%E9%80%99%E6%98%AF%E5%AE%8F%E4%BB%BB%E5%8B%99%E4%BE%86%E6%BA%90%0A%20%20%20%20WA-%3E%3EWA%3A%20%E8%A8%88%E6%99%82%E5%99%A8%E5%80%92%E6%95%B8%E7%B5%90%E6%9D%9F%0A%20%20%20%20WA-%3E%3ETQ%3A%20%E5%B0%87%20callback%20%E6%94%BE%E5%85%A5%20Task%20Queue%0A%0A%20%20%20%20Main-%3E%3EWA%3A%20%E5%91%BC%E5%8F%AB%20await%20fetch()%0A%20%20%20%20Note%20right%20of%20Main%3A%20%E9%80%99%E6%98%AF%E5%BE%AE%E4%BB%BB%E5%8B%99%E4%BE%86%E6%BA%90%0A%20%20%20%20Main-%3E%3EMain%3A%20%E7%B9%BC%E7%BA%8C%E5%9F%B7%E8%A1%8C%E5%90%8C%E6%AD%A5%E4%BB%A3%E7%A2%BC...%0A%20%20%20%20Main--%3E%3EMain%3A%20Call%20Stack%20%E6%B8%85%E7%A9%BA%0A%0A%20%20%20%20WA-%3E%3EWA%3A%20%E7%B6%B2%E8%B7%AF%E8%AB%8B%E6%B1%82%E5%AE%8C%E6%88%90%0A%20%20%20%20WA-%3E%3EMT%3A%20%E5%B0%87%20await%20%E5%BE%8C%E7%BA%8C%E6%94%BE%E5%85%A5%20Microtask%20Queue%0A%0A%20%20%20%20Note%20over%20Main%2C%20TQ%3A%20---%20Event%20Loop%20%E9%9A%8E%E6%AE%B5%20---%0A%20%20%20%20%0A%20%20%20%20rect%20rgb(240%2C%20248%2C%20255)%0A%20%20%20%20%20%20%20%20Note%20over%20Main%2C%20MT%3A%20%E5%84%AA%E5%85%88%E6%AA%A2%E6%9F%A5%E5%BE%AE%E4%BB%BB%E5%8B%99%0A%20%20%20%20%20%20%20%20MT--%3E%3EMain%3A%20%E5%9F%B7%E8%A1%8C%20fetch%20%E7%9A%84%E5%BE%8C%E7%BA%8C%20(then%2Fawait)%0A%20%20%20%20%20%20%20%20MT--%3E%3EMT%3A%20%E7%A2%BA%E4%BF%9D%E5%BE%AE%E4%BB%BB%E5%8B%99%E4%BD%87%E5%88%97%E5%85%A8%E7%A9%BA%0A%20%20%20%20end%0A%0A%20%20%20%20rect%20rgb(255%2C%20245%2C%20238)%0A%20%20%20%20%20%20%20%20Note%20over%20Main%2C%20TQ%3A%20%E5%BE%AE%E4%BB%BB%E5%8B%99%E5%85%A8%E7%A9%BA%E5%BE%8C%EF%BC%8C%E6%89%8D%E8%BC%AA%E5%88%B0%E5%AE%8F%E4%BB%BB%E5%8B%99%0A%20%20%20%20%20%20%20%20TQ--%3E%3EMain%3A%20%E5%9F%B7%E8%A1%8C%20setTimeout%20%E7%9A%84%20callback%0A%20%20%20%20end%0A"})]),fallback:i(()=>[h(" Loading... ")]),_:1})),B,a("ul",null,[a("li",null,[s(k,{href:"./fetch"},{default:i(()=>[h("ä½¿ç”¨ fetch() é€²è¡ŒéåŒæ­¥è³‡æ–™ç²å–çš„åŸºç¤æ•™å­¸")]),_:1})]),a("li",null,[s(k,{href:"./axios"},{default:i(()=>[h("Axios - next.js")]),_:1})]),a("li",null,[s(k,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop",target:"_blank",rel:"noreferrer"},{default:i(()=>[h("MDN: Event loop")]),_:1})])]),D,s(e),s(r)])}const _=d(A,[["render",u]]);export{P as __pageData,_ as default};
