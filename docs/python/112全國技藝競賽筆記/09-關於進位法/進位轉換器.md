# 進位轉換器


### 二進位
<input v-model="binaryInput" placeholder="輸入二進位" style="border:1px solid #ddd;border-radius:4px;padding:2px 5px;margin:5px 0;" />

### 十進位
<input v-model="decimalInput" placeholder="輸入十進位" style="border:1px solid #ddd;border-radius:4px;padding:2px 5px;margin:5px 0;" />

<script setup>
import { ref, watch } from 'vue';

const binaryInput = ref('');

const decimalInput = ref('');

function binaryToDecimal(binaryStr) {
  try {
    let [integerPart, fractionalPart] = binaryStr.split(".");
    let decimalInteger = parseInt(integerPart, 2);
    let decimalFractional = 0;
    if (fractionalPart) {
      for (let i = 0; i < fractionalPart.length; i++) {
        decimalFractional += parseInt(fractionalPart[i]) * Math.pow(2, -(i + 1));
      }
    }
    return decimalInteger + decimalFractional;
  } catch (error) {
    return false;
  }
}

function decimalToBinary(decimalStr) {
  try {
    let [integerPart, fractionalPart] = decimalStr.split(".");
    let binaryInteger = parseInt(integerPart).toString(2);
    let binaryFractional = "";
    if (fractionalPart) {
      binaryFractional = ".";
      let decimalFractional = parseFloat("0." + fractionalPart);
      for (let i = 0; i < 10; i++) {
        decimalFractional *= 2;
        binaryFractional += Math.floor(decimalFractional);
        decimalFractional -= Math.floor(decimalFractional);
      }
    }
    return binaryInteger + binaryFractional;
  } catch (error) {
    return false;
  }
}

watch(binaryInput, (newVal) => {
    const res = binaryToDecimal(newVal);
    if(res){
        decimalInput.value = res;
    }
});

watch(decimalInput, (newVal) => {
    const res = decimalToBinary(newVal);
    if(res){
        binaryInput.value = res;
    }
});
</script>