---
title: Java HashSet vs TreeSet å®Œæ•´æ¯”è¼ƒæ•™å­¸ | LucasHsu.dev  
description: æ·±å…¥æ¯”è¼ƒJava HashSetèˆ‡TreeSetçš„ç‰¹æ€§å·®ç•°ã€æ•ˆèƒ½è¡¨ç¾å’Œä½¿ç”¨å ´æ™¯ï¼Œé™„ç¨‹å¼ç¯„ä¾‹ã€æ™‚é–“è¤‡é›œåº¦åˆ†æèˆ‡ç·´ç¿’é¡Œã€‚
head:
  - - meta
    - name: keywords
      content: java, hashset, treeset, set, é›†åˆ, è³‡æ–™çµæ§‹, å“ˆå¸Œè¡¨, ç´…é»‘æ¨¹, javaæ•™å­¸, ç¨‹å¼è¨­è¨ˆ, æ•ˆèƒ½æ¯”è¼ƒ, æ’åº
  - - meta
    - property: og:title
      content: Java HashSet vs TreeSet å®Œæ•´æ¯”è¼ƒæ•™å­¸ | Seté›†åˆé¸æ“‡æŒ‡å—
  - - meta
    - property: og:description
      content: æ·±å…¥æ¯”è¼ƒJava HashSetèˆ‡TreeSetçš„ç‰¹æ€§å·®ç•°ã€æ•ˆèƒ½è¡¨ç¾å’Œä½¿ç”¨å ´æ™¯ï¼Œé™„ç¨‹å¼ç¯„ä¾‹ã€æ™‚é–“è¤‡é›œåº¦åˆ†æèˆ‡ç·´ç¿’é¡Œã€‚
  - - meta
    - property: og:type
      content: article
  - - meta
    - property: og:image
      content: https://lucashsu95.github.io/LucasHsu.dev/images/java-cover.jpg
---

# Java HashSet vs TreeSet å®Œæ•´æ¯”è¼ƒæ•™å­¸

> ğŸ“ TL;DR HashSet ç„¡åºå¿«é€Ÿï¼ˆO(1)ï¼‰ã€TreeSet æœ‰åºç¨æ…¢ï¼ˆO(log n)ï¼‰ï¼›å‰è€…é©åˆå»é‡æŸ¥æ‰¾ï¼Œå¾Œè€…é©åˆéœ€æ’åºèˆ‡ç¯„åœæŸ¥è©¢çš„å ´æ™¯ã€‚

## å‰ç½®çŸ¥è­˜

- äº†è§£ Java é›†åˆæ¡†æ¶åŸºæœ¬æ¦‚å¿µ
- ç†Ÿæ‚‰æ™‚é–“è¤‡é›œåº¦ï¼ˆO(1)ã€O(log n)ã€O(n)ï¼‰
- çŸ¥é“ä½•è¬‚é›œæ¹Šï¼ˆHashï¼‰èˆ‡æ¨¹ç‹€çµæ§‹

:::tip æ–°æ‰‹å‹å–„
ä¸ç†Ÿé›†åˆï¼Ÿå…ˆæƒ³ã€Œä¸é‡è¤‡çš„è³‡æ–™è¢‹ã€ï¼ŒHashSet åƒäº‚åºå¿«é€Ÿå­˜å–ï¼ŒTreeSet åƒè‡ªå‹•æ’åºæ›¸æ¶ã€‚
:::

## ä»€éº¼æ˜¯ Java Setï¼Ÿ

Set æ˜¯ä¸€å€‹ä¸å…è¨±é‡è¤‡å…ƒç´ çš„é›†åˆï¼Œé¡ä¼¼ä¸€å€‹åªæ”¶ç´ç¨ç‰¹ç‰©å“çš„é­”æ³•ç®±ã€‚èˆ‡ List ä¸åŒï¼ŒSet æ²’æœ‰ç´¢å¼•ï¼Œç„¡æ³•é€šéä½ç½®å­˜å–å…ƒç´ ï¼Œåªèƒ½æª¢æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚

Set çš„æ ¸å¿ƒç‰¹æ€§ï¼š
- **æ²’æœ‰ç´¢å¼•**ï¼Œç„¡æ³•ä½¿ç”¨ `get(index)` æ–¹æ³•
- å°ˆæ³¨æ–¼å…ƒç´ çš„**å­˜åœ¨æ€§æª¢æŸ¥**è€Œéä½ç½®
- **ä¸å…è¨±é‡è¤‡å…ƒç´ **ï¼Œè‡ªå‹•å»é‡
- **ç„¡åºæ€§**ï¼ˆé™¤éæ˜¯æœ‰åºçš„å¯¦ä½œå¦‚ TreeSetï¼‰

## HashSet ç‰¹æ€§

HashSet æ˜¯ä¸€å€‹ã€Œå¿«é€Ÿä½†ç„¡åºã€çš„é›†åˆå¯¦ä½œã€‚

### ä¸»è¦ç‰¹é»
- **ç„¡åº**ï¼šå…ƒç´ é †åºç„¡æ³•é æ¸¬ï¼Œä¸ä¿è­‰æ’å…¥é †åº
- **é«˜æ•ˆèƒ½**ï¼šåŸºæ–¼å“ˆå¸Œè¡¨å¯¦ä½œï¼Œå¹³å‡æ™‚é–“è¤‡é›œåº¦ O(1)
- **å…è¨± null**ï¼šå¯ä»¥å„²å­˜ä¸€å€‹ null å…ƒç´ 

### ç¨‹å¼ç¢¼ç¯„ä¾‹

```java
import java.util.HashSet;
import java.util.Set;

public class HashSetExample {
    public static void main(String[] args) {
        Set<String> cities = new HashSet<>();
        
        // æ·»åŠ å…ƒç´ 
        cities.add("å°åŒ—");
        cities.add("é«˜é›„");
        cities.add("å°ä¸­");
        cities.add("å°åŒ—"); // é‡è¤‡å…ƒç´ æœƒè¢«å¿½ç•¥
        
        System.out.println("HashSet: " + cities);
        // å¯èƒ½è¼¸å‡º: [å°ä¸­, å°åŒ—, é«˜é›„] (é †åºéš¨æ©Ÿ)
        
        Set<Integer> numbers = new HashSet<>();
        numbers.add(30);
        numbers.add(10);
        numbers.add(20);
        
        System.out.println("æ•¸å­—: " + numbers);
        // å¯èƒ½è¼¸å‡º: [20, 10, 30] (é †åºéš¨æ©Ÿ)
    }
}
```

## TreeSet ç‰¹æ€§

TreeSet æ˜¯ä¸€å€‹ã€Œè‡ªå‹•æ’åºã€çš„é›†åˆå¯¦ä½œã€‚

### ä¸»è¦ç‰¹é»
- **è‡ªå‹•æ’åº**ï¼šå…ƒç´ æœƒæŒ‰ç…§è‡ªç„¶é †åºæˆ–è‡ªè¨‚è¦å‰‡æ’åº
- **æœ‰åº**ï¼šç¶­æŒå…ƒç´ çš„æ’åºé †åº
- **ä¸å…è¨± null**ï¼šåŠ å…¥ null æœƒæ‹‹å‡º NullPointerException
- **è¼ƒæ…¢**ï¼šåŸºæ–¼ç´…é»‘æ¨¹å¯¦ä½œï¼Œæ™‚é–“è¤‡é›œåº¦ O(log n)

### ç¨‹å¼ç¢¼ç¯„ä¾‹

```java
import java.util.Set;
import java.util.TreeSet;

public class TreeSetExample {
    public static void main(String[] args) {
        Set<String> cities = new TreeSet<>();
        
        // æ·»åŠ å…ƒç´ 
        cities.add("å°åŒ—");
        cities.add("é«˜é›„");
        cities.add("å°ä¸­");
        cities.add("å°åŒ—"); // é‡è¤‡å…ƒç´ æœƒè¢«å¿½ç•¥
        
        System.out.println("TreeSet: " + cities);
        // è¼¸å‡º: [å°ä¸­, å°åŒ—, é«˜é›„] (æŒ‰å­—å…¸é †åºæ’åº)
        
        Set<Integer> numbers = new TreeSet<>();
        numbers.add(30);
        numbers.add(10);
        numbers.add(20);
        
        System.out.println("æ•¸å­—: " + numbers);
        // è¼¸å‡º: [10, 20, 30] (æŒ‰æ•¸å­—å¤§å°æ’åº)
    }
}
```

### TreeSet ç¯„åœæŸ¥è©¢ç¯„ä¾‹

```java
// ç¯„ä¾‹ï¼šç¶­è­·æœ‰åºçš„åˆ†æ•¸åˆ—è¡¨
Set<Integer> scores = new TreeSet<>();
scores.add(85);
scores.add(92);
scores.add(78);

System.out.println("æ’åºå¾Œçš„åˆ†æ•¸: " + scores);
// è¼¸å‡º: [78, 85, 92]

// TreeSet æä¾›çš„ç¯„åœæŸ¥è©¢æ–¹æ³•
TreeSet<Integer> scoreSet = (TreeSet<Integer>) scores;
System.out.println("80åˆ†ä»¥ä¸Š: " + scoreSet.tailSet(80));
// è¼¸å‡º: [85, 92]
```

## è©³ç´°æ¯”è¼ƒ

### æ•ˆèƒ½åˆ†æ

$O(\log n)$ å¯ä»¥ç†è§£ç‚ºï¼Œç•¶é›†åˆä¸­çš„å…ƒç´ æ•¸é‡ $n$ å¢åŠ æ™‚ï¼Œæ‰€éœ€æ™‚é–“çš„å¢é•·é€Ÿåº¦éå¸¸ç·©æ…¢ã€‚

æˆ‘å€‘å¯ä»¥é€™æ¨£ç†è§£ï¼šHashSetçš„æ¥µè‡´é€Ÿåº¦ä¾†è‡ªæ–¼å®ƒå°å…ƒç´ å­˜æ”¾ä½ç½®çš„ã€Œç›´æ¥æ˜ å°„ã€ï¼Œè€ŒTreeSetçš„é€Ÿåº¦ç¨æ…¢ï¼Œæ˜¯å› ç‚ºå®ƒå¿…é ˆå¾æ¨¹çš„æ ¹ç¯€é»é–‹å§‹ï¼Œä¸æ–·åœ°èˆ‡å…¶ä»–å…ƒç´ é€²è¡Œæ¯”è¼ƒï¼Œæ‰èƒ½æ‰¾åˆ°æ­£ç¢ºçš„æ’å…¥æˆ–å°‹æ‰¾ä½ç½®ã€‚é€™æ˜¯ä¸€ç¨®æ•ˆèƒ½èˆ‡åŠŸèƒ½çš„æ¬Šè¡¡å–æ¨ï¼šTreeSetçŠ§ç‰²äº†ä¸€é»é»é€Ÿåº¦ï¼Œä¾†æ›å–è‡ªå‹•æ’åºé€™å€‹å¼·å¤§åŠŸèƒ½ ã€‚ Â  

4.4 ç‰¹æ®Šå…ƒç´ ï¼šnull å…ƒç´ å¯ä»¥æ”¾å—ï¼Ÿ
HashSetï¼šHashSetå…è¨±å„²å­˜ä¸€å€‹nullå…ƒç´  ã€‚ Â  

TreeSetï¼šTreeSetå‰‡ä¸å…è¨±å„²å­˜nullå…ƒç´ ï¼Œå¦‚æœä½ å˜—è©¦åŠ å…¥ï¼Œç¨‹å¼æœƒç«‹å³æ‹‹å‡ºNullPointerExceptionï¼ˆç©ºæŒ‡é‡ç•°å¸¸ï¼‰ ã€‚ Â  

é€™å€‹çœ‹ä¼¼ç°¡å–®çš„å·®ç•°ï¼Œå…¶å¯¦æ˜¯ç”±TreeSetçš„åº•å±¤æ’åºæ©Ÿåˆ¶æ‰€æ±ºå®šçš„ã€‚ç”±æ–¼TreeSetéœ€è¦å°æ‰€æœ‰å…ƒç´ é€²è¡Œæ¯”è¼ƒï¼ˆé€écompareTo()æ–¹æ³•ï¼‰ï¼Œè€Œnullå€¼ç„¡æ³•é€²è¡Œä»»ä½•æ¯”è¼ƒï¼Œå› æ­¤ç‚ºäº†é¿å…ç¨‹å¼éŒ¯èª¤ï¼Œå®ƒå¾ä¸€é–‹å§‹å°±ç¦æ­¢äº†nullå…ƒç´ çš„åŠ å…¥ ã€‚ Â  

4.5 ç¨ä¸€ç„¡äºŒçš„ç§˜è¨£ï¼šæ€éº¼åˆ¤æ–·å…©å€‹å…ƒç´ æ˜¯é‡è¤‡çš„ï¼Ÿ
Set é›†åˆçš„å…±åŒç‰¹æ€§æ˜¯å…ƒç´ ä¸é‡è¤‡ï¼Œä½† HashSet å’Œ TreeSet å°ã€Œé‡è¤‡ã€çš„å®šç¾©ä¸åŒï¼š

**HashSet** ä½¿ç”¨ `hashCode()` å’Œ `equals()` æ–¹æ³•åˆ¤æ–·é‡è¤‡ï¼š
- å¦‚æœå…©å€‹å…ƒç´ çš„å“ˆå¸Œå€¼å’Œå…§å®¹éƒ½ç›¸ç­‰ï¼ŒHashSet èªç‚ºå®ƒå€‘é‡è¤‡

**TreeSet** ä½¿ç”¨ `compareTo()` æ–¹æ³•åˆ¤æ–·é‡è¤‡ï¼š
- å¦‚æœ `compareTo()` è¿”å› 0ï¼ŒTreeSet èªç‚ºå…ƒç´ ç›¸ç­‰ï¼Œå³ä½¿å…¶ä»–æ–¹é¢ä¸åŒ

> âš ï¸ **æ³¨æ„**ï¼šåœ¨ TreeSet ä¸­å„²å­˜è‡ªå®šç¾©ç‰©ä»¶æ™‚ï¼Œå¿…é ˆç¢ºä¿ `compareTo()` æ–¹æ³•é‚è¼¯åš´è¬¹ï¼Œæ­£ç¢ºå®šç¾©ã€Œå”¯ä¸€æ€§ã€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåªæ ¹æ“šå­¸ç”Ÿç¸½åˆ†æ’åºï¼Œç›¸åŒåˆ†æ•¸çš„ä¸åŒå­¸ç”Ÿæœƒè¢«è¦–ç‚ºé‡è¤‡è€Œåªä¿ç•™ä¸€å€‹ã€‚

### æ ¸å¿ƒå·®ç•°å°ç…§è¡¨

| ç‰¹å¾µ          | HashSet              | TreeSet                  |
| ------------- | -------------------- | ------------------------ |
| æ’åº          | ç„¡åº                 | è‡ªå‹•æ’åºï¼ˆè‡ªç„¶æˆ–è‡ªè¨‚ï¼‰   |
| åº•å±¤çµæ§‹      | å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ | ç´…é»‘æ¨¹ï¼ˆRed-Black Treeï¼‰ |
| æ“ä½œæ•ˆç‡      | å¹³å‡ O(1)            | O(log n)                 |
| æ˜¯å¦å…è¨± null | å…è¨±ï¼ˆä¸€å€‹ï¼‰         | ä¸å…è¨±                   |
## æ‡‰ç”¨å ´æ™¯é¸æ“‡

é¸æ“‡ä¾æ“šï¼šæ•ˆèƒ½å„ªå…ˆé¸ HashSetï¼Œæ’åºéœ€æ±‚é¸ TreeSetã€‚

| æ‡‰ç”¨æƒ…å¢ƒ                                           | æ¨è–¦    | ç†ç”±                                                                   |
| -------------------------------------------------- | ------- | ---------------------------------------------------------------------- |
| å¿«é€Ÿå»é‡èˆ‡æª¢æŸ¥<br>è¨˜éŒ„éŠæˆ²æˆå°±IDã€çµ±è¨ˆç¶²é è¨ªå•è€…IP | HashSet | åªéœ€å¿«é€Ÿç¢ºèªè³‡æ–™å­˜åœ¨æ€§å’Œå”¯ä¸€æ€§ï¼ŒHashSet çš„æ¥µè‡´æ•ˆèƒ½æ˜¯æœ€ä½³é¸æ“‡           |
| æ’åºæˆ–ç¯„åœæŸ¥è©¢<br>å­¸ç”Ÿæˆç¸¾æ’åã€ç¶­è­·å­—æ¯é †åºåå–®   | TreeSet | éœ€è¦è‡ªå‹•æ’åºåŠŸèƒ½å’Œç¯„åœæŸ¥è©¢ï¼ˆå¦‚æ‰¾å‡º90åˆ†ä»¥ä¸Šå­¸ç”Ÿï¼‰ï¼ŒTreeSet æä¾›é€™äº›åŠŸèƒ½ | **ç°¡è€Œè¨€ä¹‹**ï¼š |
- ä¸é—œå¿ƒè³‡æ–™é †åºï¼Œåªå¸Œæœ›å¿«é€Ÿå­˜å– â†’ **HashSet**
- éœ€è¦è‡ªå‹•æ’åºé›†åˆï¼Œå³ä½¿çŠ§ç‰²æ•ˆèƒ½ â†’ **TreeSet**

## å¯¦æˆ°ç·´ç¿’

### ç·´ç¿’ 1ï¼šåŸºç¤ä½¿ç”¨ï¼ˆç°¡å–®ï¼‰

å»ºç«‹ `HashSet<Integer>` åŠ å…¥ `{5, 2, 8, 2, 5}`ï¼Œè¼¸å‡ºçµæœä¸¦èªªæ˜ç‚ºä½•æ˜¯ 3 å€‹å…ƒç´ ã€‚

:::details ç­”æ¡ˆ
```java
Set<Integer> set = new HashSet<>();
set.add(5);
set.add(2);
set.add(8);
set.add(2); // é‡è¤‡ï¼Œä¸æœƒåŠ å…¥
set.add(5); // é‡è¤‡ï¼Œä¸æœƒåŠ å…¥
System.out.println(set); // å¯èƒ½è¼¸å‡º [8, 2, 5]ï¼ˆç„¡åºï¼‰
```

å› ç‚º Set è‡ªå‹•å»é‡ï¼Œæ‰€ä»¥åªä¿ç•™ 3 å€‹å”¯ä¸€å€¼ã€‚
:::

### ç·´ç¿’ 2ï¼šé¸æ“‡åˆé©çš„ Setï¼ˆç°¡å–®ï¼‰

ä½•æ™‚ç”¨ HashSetï¼Ÿä½•æ™‚ç”¨ TreeSetï¼Ÿåˆ—èˆ‰è‡³å°‘å…©å€‹é©ç”¨å ´æ™¯ã€‚

:::details ç­”æ¡ˆ
**HashSet**ï¼šå»é‡ã€æª¢æŸ¥æ˜¯å¦å­˜åœ¨ã€ä¸åœ¨æ„é †åºçš„çµ±è¨ˆï¼ˆå¦‚ä½¿ç”¨è€… ID é›†åˆï¼‰ã€‚  
**TreeSet**ï¼šæ’è¡Œæ¦œã€ç¯„åœæŸ¥è©¢ï¼ˆå¦‚ 80-100 åˆ†å­¸ç”Ÿï¼‰ã€éœ€æŒ‰é †åºè¿­ä»£çš„è³‡æ–™ã€‚
:::

### ç·´ç¿’ 3ï¼šè‡ªè¨‚æ’åºï¼ˆä¸­ç­‰ï¼‰

ç”¨ TreeSet å„²å­˜ `Person` ç‰©ä»¶ï¼Œä¾å¹´é½¡æ’åºã€‚è‹¥å¹´é½¡ç›¸åŒå‰‡ä¾å§“åæ’åºã€‚

:::details ğŸ’¡ åƒè€ƒç­”æ¡ˆ
```java
class Person {
    String name;
    int age;
    Person(String n, int a) { name = n; age = a; }
}

Set<Person> people = new TreeSet<>(
    Comparator.comparingInt((Person p) -> p.age)
              .thenComparing(p -> p.name)
);
people.add(new Person("Alice", 30));
people.add(new Person("Bob", 25));
people.add(new Person("Charlie", 30));

people.forEach(p -> System.out.println(p.name + ", " + p.age));
// è¼¸å‡º: Bob, 25 / Alice, 30 / Charlie, 30
```
:::

## FAQ

**Q: HashSet å¯ä»¥å­˜ null å—ï¼Ÿ**  
A: å¯ä»¥å­˜ä¸€å€‹ nullã€‚TreeSet ä¸å…è¨± nullï¼ˆæœƒæ‹‹å‡º `NullPointerException`ï¼‰ã€‚

**Q: å¦‚ä½•åˆ¤æ–·å…ƒç´ é‡è¤‡ï¼Ÿ**  
A: HashSet ç”¨ `hashCode()` èˆ‡ `equals()`ï¼›TreeSet ç”¨ `compareTo()` æˆ– `Comparator`ã€‚

**Q: TreeSet èƒ½åšç¯„åœæŸ¥è©¢å—ï¼Ÿ**  
A: å¯ä»¥ï¼Œç”¨ `subSet()`ã€`headSet()`ã€`tailSet()` ç­‰æ–¹æ³•ã€‚

## è¦–è¦ºåŒ–æ¯”è¼ƒ

```mermaid
graph LR
    A[éœ€è¦æ’åº?] -->|æ˜¯| B[TreeSet<br/>O(log n)]
    A -->|å¦| C[åªè¦å»é‡?]
    C -->|æ˜¯| D[HashSet<br/>O(1)]
    C -->|å¦| E[è€ƒæ…®LinkedHashSet<br/>O(1)ä¸”ä¿æ’å…¥é †åº]
```

## å»¶ä¼¸é–±è®€

- [Arrayèˆ‡Listæ·±å…¥æ¯”è¼ƒ](./Arrayèˆ‡Listæ·±å…¥æ¯”è¼ƒ) - ç†è§£é™£åˆ—èˆ‡åˆ—è¡¨å·®ç•°
- [Java interface](./java-interface) - äº†è§£ Set ä»‹é¢è¨­è¨ˆ

## ç¸½çµ

1. HashSetï¼šç„¡åºã€O(1)ã€é©åˆå¿«é€Ÿå»é‡èˆ‡æŸ¥æ‰¾
2. TreeSetï¼šæœ‰åºã€O(log n)ã€é©åˆæ’åºèˆ‡ç¯„åœæŸ¥è©¢
3. é¸æ“‡ä¾æ“šï¼šæ•ˆèƒ½å„ªå…ˆç”¨ HashSetï¼Œéœ€æ’åºç”¨ TreeSet
4. è‡ªè¨‚ç‰©ä»¶éœ€å¯¦ä½œ `Comparable` æˆ–æä¾› `Comparator`