---
head:
  - - meta
    - name: author
      content: è¨±æ©ç¶¸
  - - meta
    - name: keywords
      content: å‚³çµ±æ™‚é˜è£½ä½œ, JavaScript æ™‚é˜, HTML æ™‚é˜, CSS æ™‚é˜, ç¶²é æ“ä½œ
  - - meta
    - property: og:title
      content: å‚³çµ±æ™‚é˜è£½ä½œæŒ‡å—
  - - meta
    - property: og:description
      content: ä½¿ç”¨ JavaScriptã€HTML å’Œ CSS è£½ä½œå‚³çµ±æ™‚é˜çš„è©³ç´°æŒ‡å—ã€‚
  - - meta
    - property: og:type
      content: article
  - - meta
    - property: og:image
      content: https://lucashsu95.github.io/LucasHsu.dev/images/javascript-cover.jpg
---

# å‚³çµ±æ™‚é˜è£½ä½œæŒ‡å—

> ğŸ“ TL;DR
- æ•¸å­—æ’åˆ—:ç”¨ `rotate` æ—‹è½‰ 12 å€‹æ•¸å­—æ”¾åˆ°åœ“å‘¨ä¸Šã€‚
- æŒ‡é‡è½‰å‹•:`setInterval` æ¯ç§’æ›´æ–°æ™‚åˆ†ç§’é‡è§’åº¦ã€‚
- æ™‚é–“è¨ˆç®—:æ™‚é‡ 30Â°/å°æ™‚ã€åˆ†é‡ 6Â°/åˆ†é˜ã€ç§’é‡ 6Â°/ç§’ã€‚

## å‰ç½®çŸ¥è­˜
- CSS `position: absolute`ã€`transform-origin`ã€`rotate`
- JavaScript `Date` ç‰©ä»¶èˆ‡æ™‚é–“å–å¾—
- `setInterval` å®šæ™‚åŸ·è¡Œå‡½æ•¸

## 1. æŠŠæ•¸å­—åšå‡ºä¾†

é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦åœ¨æ™‚é˜ä¸Šé¡¯ç¤ºæ•¸å­—ã€‚é€™äº›æ•¸å­—å°‡æœƒä»¥12å°æ™‚åˆ¶é¡¯ç¤ºåœ¨æ™‚é˜çš„å‘¨åœã€‚

æˆ‘å€‘ä½¿ç”¨ JavaScript ä¾†å‹•æ…‹ç”Ÿæˆæ•¸å­—ä¸¦å°‡å…¶æ·»åŠ åˆ°æ™‚é˜ä¸Šï¼š

```html
<section class="clock"></section>

<script>
  const clock = document.querySelector(".clock");
  for (let i = 11; i < 23; i++) {
    const idx = i - 11;

    // 360 / 12 = 30
    clock.innerHTML += `
    <div class="num" style="rotate:${idx * 30}deg">
        ${(i % 12) + 1}
    </div>`;
  }
</script>
```

åœ¨ `css` ä¸­ï¼Œç‚ºæ™‚é˜å’Œæ•¸å­—è¨­ç½®æ¨£å¼ï¼š

```css
.clock {
  width: 300px;
  height: 300px;

  border: 5px solid #333;
  border-radius: 50%;
  box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.1);
  font-size: 18px;
  font-weight: bold;

  position: relative;

  display: flex;
  justify-content: center;
  align-items: center;
}

.num {
  width: 95%;
  height: 95%;
  position: absolute;
  text-align: center;
}
```

## 2. åœ¨æ™‚é˜åŠ å¢åŠ æ™‚åˆ†ç§’é‡

åœ¨`.clock`è£¡å¢åŠ 3å€‹`div`

```html
<section class="clock">
  <div class="hour"></div>
  <div class="minute"></div>
  <div class="second"></div>
</section>
```

åœ¨ css ä¸­ï¼Œæˆ‘å€‘ç‚ºæŒ‡é‡è¨­ç½®æ¨£å¼ï¼š

```css
.hour,
.minute,
.second {
  color: #fff;
  background: #222;
  border-radius: 20px;

  position: absolute;
  top: 50%;

  translate: 0 -100%;
  transform-origin: bottom left;

  width: 3px;
}

.hour {
  height: 25%;
}

.minute {
  height: 35%;
}

.second {
  background: red;
  width: 1px;
  height: 45%;
}
```

## 3. è®“æ™‚é˜å‹•èµ·ä¾†

æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘éœ€è¦è®“æ™‚é˜çš„æŒ‡é‡æ ¹æ“šç•¶å‰æ™‚é–“é€²è¡Œæ—‹è½‰ã€‚

æˆ‘å€‘å®šç¾©äº†ä¸€å€‹ `render` å‡½æ•¸ä¾†æ›´æ–°æŒ‡é‡çš„ä½ç½®ï¼š

```html
<script>
  const hour = document.querySelector(".hour");
  const minute = document.querySelector(".minute");
  const second = document.querySelector(".second");

  function render(date) {
    const h = date.getHours();
    const m = date.getMinutes();
    const s = date.getSeconds();
    hour.style.rotate = `${h * 30 + m / 2}deg`; // 360 / 12 = 30
    minute.style.rotate = `${m * 6 + s / 10}deg`; // 360 / 60 = 6
    second.style.rotate = `${s * 6}deg`; // 360 / 60 = 6
  }

  setInterval(() => render(new Date()), 1000); // æ¯ä¸€ç§’å‘¼å«ä¸€æ¬¡å‡½æ•¸
</script>
```

## 4. è®“æ™‚é˜å¯ä»¥é¸æ“‡æ™‚é–“

æœ€å¾Œï¼Œæˆ‘å€‘éœ€è¦æ·»åŠ ä¸€å€‹æ™‚é–“é¸æ“‡å™¨ï¼Œè®“ç”¨æˆ¶å¯ä»¥é¸æ“‡æ™‚é–“ä¸¦æ›´æ–°æ™‚é˜ã€‚

æ·»åŠ ä¸€å€‹æ™‚é–“é¸æ“‡å™¨ä¸¦è¨­ç½®äº‹ä»¶ç›£è½å™¨ï¼š

```html
<input type="time" id="timer" step="1" />

<script>
  const timer = document.querySelector("#timer");
  timer.addEventListener("change", function () {
    console.log(this.value);

    const time = this.value.split(":");
    const h = time[0];
    const m = time[1];
    const s = time[2];

    render(new Date(0, 0, 0, h, m, s));
  });
</script>
```

ç‚ºæ™‚é–“é¸æ“‡å™¨è¨­ç½®æ¨£å¼ï¼š

```css
#timer {
  width: 100%;
  margin: 10px 0 20px;
}
```

é€™æ¨£ï¼Œæˆ‘å€‘å°±å®Œæˆäº†ä¸€å€‹å¯ä»¥é¡¯ç¤ºæ•¸å­—ã€å‹•æ…‹æ›´æ–°æŒ‡é‡ä¸¦å…è¨±ç”¨æˆ¶é¸æ“‡æ™‚é–“çš„å‚³çµ±æ™‚é˜ã€‚

[DEMO](https://ntub-dp.github.io/javascript-training/clock/clock)

## å»¶ä¼¸é–±è®€
- [MDN: Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)
- [CSS rotate èˆ‡ transform-origin](https://developer.mozilla.org/en-US/docs/Web/CSS/rotate)
- [setInterval vs requestAnimationFrame](https://javascript.info/settimeout-setinterval)

## FAQ
- Q: ç‚ºä½•æ™‚é‡è§’åº¦è¦åŠ  `m / 2`?
  - A: æ™‚é‡ä¸åªè·Ÿå°æ™‚æœ‰é—œ,æ¯åˆ†é˜ä¹Ÿæœƒç§»å‹• 0.5Â° (30Â° / 60åˆ†),æ‰€ä»¥è¦åŠ ä¸Šåˆ†é˜çš„å½±éŸ¿ã€‚
- Q: å¦‚ä½•è®“ç§’é‡å¹³æ»‘è½‰å‹•?
  - A: ç”¨ `requestAnimationFrame` å–ä»£ `setInterval`,ä¸¦ç”¨æ¯«ç§’è¨ˆç®—è§’åº¦: `s + ms / 1000`ã€‚
- Q: æ•¸å­—ç‚ºä½•è¦åè½‰å›ä¾†?
  - A: å¤–å±¤ div æ—‹è½‰å¾Œ,å…§å±¤æ•¸å­—ä¹Ÿè·Ÿè‘—æ—‹è½‰äº†,éœ€è¦åœ¨å…§å±¤å†åè½‰å›æ­£: `<span style="rotate: -${idx * 30}deg">${num}</span>`ã€‚

## æœ€å¾Œå®Œæ•´é«”

::: info ä¸‹è¼‰æœ€å¾Œå®Œæ•´ç‰ˆæœ¬
[é»æˆ‘ä¸‹æˆ´](../assets/ç¶²é æ“ä½œ/clock.zip)
:::